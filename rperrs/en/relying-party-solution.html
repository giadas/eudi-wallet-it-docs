<!DOCTYPE html>
<html lang="en" class="no-js" prefix="og: http://ogp.me/ns#">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Italian EUDI Wallet implementation profile version: latest documentation | Relying Party Solution</title>

  <!-- Styles -->
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css">
  <link rel="stylesheet" href="_static/pygments.css" type="text/css">

  <!-- Relations -->
  <link rel="index" title="Index" href="index.html">
  <link rel="top" title="The Italian EUDI Wallet implementation profile version: latest documentation" href="index.html">
  <link rel="next" title="Credential Lifecycle" href="revocation-lists.html">
  <link rel="prev" title="PID/(Q)EAA Issuance" href="pid-eaa-issuance.html">

  
  
  <!-- No Index - keep if out of docs.italia.it -->
  
  <meta name="robots" content="noindex, nofollow">
  
</head>

<body class="docs-italia">
  <script>
	if (document.location.href.indexOf('?payload=') >= 0)
		document.body.className += ' loading';
</script>
  <header class="container-fluid container-fluid--desktop px-0 header">
  <nav class="navbar navbar-expand-lg primary-bg-a7 navbar-dark slim-header justify-content-start p-0 pl-lg-4 pr-lg-5">
    <span class="navbar-brand ml-4"><a class="text-white" href="https://www.agid.gov.it">AGID</a> + <a class="text-white" href="https://teamdigitale.governo.it">Team Digitale</a></span>
    <button class="navbar-toggler collapsed text-white px-2 py-0 mr-3"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation">
    <span class="navbar__icon it-expand my-auto ml-1"></span></button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="http://pianotriennale-ict.italia.it">Piano Triennale</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Communities</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://developers.italia.it">Developers</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://designers.italia.it">Designers</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Tools</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://forum.italia.it">Forum</a>
        </li>
        <li class="nav-item px-lg-2 pl-3 active">
          <a class="nav-link" href="https://docs.italia.it">Docs</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://github.com/italia">GitHub</a>
        </li>
      </ul>
    </div>
    
    <div class="ml-auto">
      
    </div>
  </nav>

  <div class="row p-4 px-lg-5 m-0 bg-primary--dark align-items-center">
    <div class="row w-100">
      <div class="logo--header">
        <a href="/" tabindex="-1" aria-hidden="true" class="d-block">
          <svg class="svg--header align-bottom" xmlns="http://www.w3.org/2000/svg" height="78.187" width="97.387" viewBox="0 0 91.300002 73.300002"><g fill="#fff"><path d="M31.799 71.9V15.7h15.1V72h-15.1zM91.099 28.5h-13.8v23.1c0 2.3.1 3.8.2 4.8.1.9.5 1.7 1.2 2.4s1.8 1 3.3 1l8.6-.2.7 12c-5 1.1-8.9 1.7-11.5 1.7-6.8 0-11.4-1.5-13.8-4.6-2.5-3-3.7-8.6-3.7-16.8V0h15.1v15.6h13.8v12.9zM9.099 32.8c-2.6 0-4.8-.9-6.5-2.7s-2.6-4-2.6-6.6.9-4.8 2.5-6.6c1.7-1.8 3.9-2.6 6.5-2.6s4.8.9 6.5 2.7 2.5 4 2.5 6.7-.8 4.8-2.5 6.6c-1.6 1.6-3.7 2.5-6.4 2.5z"/></g></svg>
        </a>
      </div>
      <div class="col pl-3 pl-sm-4">
        <h1 class="h1--header mb-1">
          <a href="/" class="site-title text-white">
            Docs Italia
            
              <span class="badge badge-pill bg-primary--mid-dark align-middle">beta</span>
            
          </a>
        </h1>
        <h2 class="text-white mb-0 h2--header">Public documents, made digital.</h2>
      </div>
    </div>
    <div class="row mt-4 w-100 docs__document-info">
      <div class="col-md-6">
        <i class="docs-icon-document docs__document-info__icon"></i>
        <a href="index.html" class="text-white font-weight-normal">
          The Italian EUDI Wallet implementation profile version: latest documentation
        </a>
      </div>
      <div class="docs__document-info__ownership col-md-5 offset-md-1 mt-3 mt-md-0">
        
        <div class="w-100">
          <i class="docs-icon-project docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Project:</span>
          <a href="/organizzazione-demo/progetto-demo" class="text-white font-weight-normal">
            <u>Progetto demo</u>
          </a>
        </div>
        
        
        <div class="w-100 mt-1">
          <i class="docs-icon-publisher docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Administration:</span>
          <a href="/organizzazione-demo/" class="text-white font-weight-normal">
            <u>Organizzazione demo</u>
          </a>
        </div>
        
      </div>
    </div>
  </div>
</header>
<div class="doc-header container-fluid container-fluid--desktop bg-white">
  <div class="row py-3 px-4 px-lg-5 align-items-center flex-nowrap justify-content-between">
    <div class="col-auto d-md-none d-flex align-items-center order-1">
      <a href="#" class="btn p-2" role="button" id="searchbox-toggle" data-toggle="collapse" data-target="#searchbox" aria-controls="searchbox" aria-expanded="false" aria-label="Toggle searchbox">
        <span class="docs-icon-search d-inline-block">
          <span class="sr-only">Search in Document</span>
        </span>
      </a>
    </div>
    <div class="col-3 d-none d-md-flex pl-0">
      
  <div class="w-100" role="search">
    <form class="mr-md-3" id="rtd-search-form" action="search.html" method="get">
      <div class="input-group" role="search">
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
        <input type="text" class="p-2 text-grey form-control" style="" required="" id="cerca" name="q" placeholder="Search in Document...">
				<span class="input-group-append">
					<button type="submit" class="btn btn-default text-primary px-3 py-2" role="search">
            <span class="docs-icon-search d-block my-auto">
							<span class="sr-only">Search in Document</span>
						</span>
					</button>
				</span>
			</div>
    </form>
  </div>
    </div>
    <div class="col-auto d-flex align-items-center justify-content-center flex-md-grow-1 order-0 order-md-1 pl-0">
      
      <a href="#" role="button" class="btn p-2" data-toggle="modal" data-target="#document-info">
        <span class="docs-icon-info"></span>
        <span class="d-none d-md-inline align-middle">About this document</span>
      </a>
      
    </div>
    <div class="col-4 col-sm-auto d-flex flex-md-grow-1 align-items-center justify-content-center order-1">
      <div id="rst-menu" class="px-2">
        <div class="dropdown" id="version-list">
            <button class="btn btn-primary dropdown-toggle badge badge-pill bg-primary text-nowrap px-3 py-2" type="button" id="dropdownVersionButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="current-version">bozza</span>
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownVersionButton">
              <div class="version-list-wrapper"></div>
            </div>
        </div>
      </div>
    </div>
    <div class="col-auto d-none d-md-flex flex-grow-1 align-items-center order-1">
      <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Download</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Source</span>
    </a>
  </div>
</div>
    </div>
    
    <div class="col-auto pr-0 d-md-none d-flex align-items-center justify-content-end order-1">
      <a href="#" role="button" class="btn py-2 px-0" data-toggle="modal" data-target="#document-actions">
        <span class="docs-icon-more"></span>
        <span class="sr-only">Actions</span>
      </a>
    </div>
  </div>
  <div class="row">
    <div class="progress-container">
      <div class="progress-bar" id="scrollprogressBar"></div>
    </div>
  </div>
</div>

	<!--
  Forum Italia comments templates
-->

<script id="forum-italia-comments" type="text/template">
  <div class="block-comments" id="accordion-comments-{{ topicId }}" data-topic="{{ topicId }}">
    <!-- Top header -->
    <div class="block-comments__header d-flex border-top border-bottom border-width-2 pt-3 pb-3 align-items-center justify-content-between">
      <h6 class="col-auto text-uppercase mb-0">{{ commentsCount }} Commenti</h6>
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
  <div class="block-comments__body collapse" data-parent="#accordion-comments-{{ topicId }}" id="comments-{{ topicId }}">
    <!-- Input row -->
    <div class="d-flex align-items-center mb-4 block-comments__input">
      <div class="box-comment {{ canPost }}" data-topic="{{ topicId }}"></div>
    </div>
    <div class="row">
      <div class="block-comments__container col">
        <div class="row mt-4">
          <ul class="block-comments__list col items mb-0" id="accordion-comment-item" data-topic="{{ topicId }}"></ul>
        </div>
      </div>
    </div>
    <div class="block-comments__header d-flex border-bottom border-width-2 pt-3 pb-3 mb-4 align-items-center justify-content-end">
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
</script>

<script id="forum-italia__comment" type="text/template">
  <li id="comment-{{ post.id }}" class="row mb-4 block-comments__item {{ hidden }} {{ isNew }}"
      data-topic="{{ post.topic_id }}" data-comment="{{ post.id }}">
    <div id="reply-to-{{ post.id }}" class="block-comments__reply-anchor"></div>
    <figure class="col-auto mb-0">
      <img class="block-comments__img rounded-circle" src="{{ avatarUrl }}">
    </figure>
    <div class="col block-comments__content">
      <div class="row align-items-center justify-content-between" id="comment-heading-1">
        <div class="col-auto">
          <span class="block-comments__name text-capitalize mb-0">{{ displayName }}</span>
        </div>
        <div class="col-auto">
          <p class="d-inline-block mr-2 block-comments__date mb-0">{{ date }}</p>
          <button class="block-comments__item-btn" data-toggle="collapse"
                  data-target="#collapse-{{ post.id }}">
            <i class="it-collapse"></i>
            <i class="it-expand"></i>
          </button>
        </div>
      </div>
      <p class="text-uppercase block-comments__role">{{ publicUserField }}</p>
      <div class="my-3">{{ replyLink }}</div>
      <div id="collapse-{{ post.id }}" class="block-comments__paragraph pl-3 border-left collapse show"
           aria-labelledby="comment-heading-1">
        {{ post.cooked }}
      </div>
      <div class="block-comments__actions mb-2 mt-3">
        {{ postActions }}
      </div>
    </div>
  </li>
</script>

<script id="forum-italia__like-button" type="text/template">
  <small>
      <button id="{{ buttonAction }}-like-{{ post.id }}" type="button" class="btn btn-primary btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </button>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__like-info" type="text/template">
  <small>
      <span id="like-{{ post.id }}" class="border rounded btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </span>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__reply-link" type="text/template">
  <div>
    <small>In risposta al 
      <a class="reply-to-post" href="#reply-to-{{ replyDest.id }}">
        commento di {{ replyDest.name }}
      </a>
    </small>
  </div>
</script>

<script id="forum__login" type="text/template">
  <div class="box-comment__user-image box-comment__user-image--anon">
    <i class="docs-icon-user"></i>
  </div>
  <div class="box-comment__login">
    <div><button class="login-button btn-link p-0 border-0 align-baseline">Accedi al Forum</button> per commentare</div>
  </div>
</script>

<script id="forum__comment" type="text/template">
  <div class="form group">
    <div class="box-comment__errors-box"></div>
    <!-- Write -->
    <div class="d-flex align-items-center mt-4 mb-4 block-comments__input box-comment__write">
      <figure class="col-auto mb-0">
        <img class="block-comments__img box-comment__figure rounded-circle" src="">
          <figcaption>
            <a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
          </figcaption>
      </figure>
      <textarea class="form-control box-comment__body col ml-2 p-2" id="comments-input" placeholder="Scrivi qui un commento. Per formattare il testo puoi usare Markdown. Clicca sul bottone 'suggerimenti' per vedere alcuni esempi." rows="4"></textarea>
    </div>
    <!-- Buttons -->
    <div class="box-comment__buttons">
      <button type="button" class="btn btn-primary btn-sm box-comment__submit mr-2" disabled="true"><div>invia</div></button>
      <button type="button" class="btn btn-sm btn-secondary new-comment__suggestions" data-container="body" data-toggle="popover" data-content="html">suggerimenti</button><span class="loading no-bg">&nbsp;</span>
    </div>
    <div class="box-comment__required">
      <span>Scrivi almeno altri <span class="required-chars">20</span> caratteri</span>
    </div>
  </div>
</script>

<script id="forum-italia__missing_permission" type="text/template">
	<div class="pl-2 block-comments__input missing_permission error error--{{ errorCode }} row">
		<figure class="col-auto mb-0 mr-2">
			<img class="block-comments__img new-comment__figure rounded-circle" src="">
			<figcaption>
				<a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
			</figcaption>
		</figure>

		<div class="missing_permission__text col pt-2">{{ errorText }}</div>
	</div>
</script>

<script id="forum__logout--modal" type="text/template">
  <div class="modal logout-modal" id="logout-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Logout</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Dopo il logout non sarà possibile scrivere nuovi commenti. Sicuro di voler procedere?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="logout-modal__submit">Conferma</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="logout-modal__cancel">Annulla</button>
        </div>
      </div>
    </div>
  </div>
</script>

<script id="forum-italia__markup__tooltip" type="text/template">
  <div class="tooltip tooltip--active doc-tooltip box-comment__suggestions__tooltip" role="tooltip">
    <div class="tooltip__wrap">
      Markdown per la formattazione del testo:
      <ul class="tooltip__content">
        <li><b>Grassetto:</b> __testo__ (o **testo**)</li>
        <li><i>Corsivo</i>: _testo_</li>
        <li>Link: [Testo](http://example.com)</li>
        <li>Citazione: &gt; Testo citazione</li>
      </ul>
    </div>
  </div>
</script>

<script id="forum-italia__silenced" type="text/template">
  <div class="error error__silenced">
    Il tuo account è stato temporaneamente sospeso, scopri di più leggendo
    <a href="{{ notificationsUrl }}" target="_blank">le tue notifiche</a> su Forum Italia.
    <br>
  </div>
</script>

<script id="forum-italia__closedTopic" type="text/template">
  <div class="error error__closed">
    Questa discussione è in sola lettura.
    <br>
  </div>
</script>

<script id="section_navigation__comments" type="text/template">
  <li class="chapter-nav__item">
      <span class="it-comment mr-2 align-middle"></span>
      <a href="#forum-italia-comments-{{ topicId }}" class="chapter-link chapter-link--expand">
          {{ postsCount }} commenti
      </a>
  </li>
</script>


<!--
  markup_modifier templates
-->

<script id="markup_modifier__chapter-header" type="text/template"> <div class="chapter-header clearfix"><div class="title-wrap"> </script>

<script id="markup_modifier__icon" type="text/template">
	<span class="docs-icon-{{ i }}"></span>
</script>

<script id="markup_modifier__note-action" type="text/template">
	<div class='note-action'>
		<button type='button' class='note-close-btn'>×</button>
		<button type='button' class='note-back-btn'><i class='it-arrow-up'></i> {{ text }} </button>
	</div>
</script>

<script id="markup_modifier__admonition" type="text/template">
	<div class='admonition__toggle-wrap'>
		<button type='button' class='admonition__toggle-btn'>
			<span class='admonition__toggle-show-more'>
				{{ more }} <span class='docs-icon-plus'></span>
			</span>
			<span class='admonition__toggle-show-less'>
				{{ less }} <span class='docs-icon-minus'></span>
			</span>
		</button>
	</div>
</script>


<!--
  glossary_page templates
-->

<script id="glossary__btn" type="text/template">
	<button class='glossary-page__btn collapsed border-top border-grey-light border-width-2 pt-3 pb-3' data-toggle='collapse' data-target='#glossary-{{ id }}' aria-expanded='true' aria-controls='glossary-{{ id }}'>
		<span class='docs-icon-plus mr-3'> </span>
		<span class='docs-icon-minus mr-3'> </span>
		{{ text }}
	</button>
</script>

<script id="glossary__copy-link" type="text/template">
	<div class='glossary-page__copy-link-wrap mt-3'>
		<i class='it-link mr-2 align-middle'></i>
		<button type='button' class='glossary-page__copy-link'> {{ copyLink }} </button>
	</div>
</script>


<!--
  searchbox_collapse templates
-->

<script id="searchbox-collapse" type="text/template">
	<div class="row p-2"><div class="col"></div></div>
</script>


<!--
  section_navigation templates
-->

<script id="section_navigation__nav" type="text/template">
    <div class="chapter-nav">
        <div class="chapter-nav__wrap">
            <ul class="chapter-nav__list chapter-nav__list--visible">
                <li class="chapter-nav__item">
                    <span class="it-more-items mr-2 align-middle"></span>
                    <button type="button" data-toggle="modal"
                        class="chapter-link chapter-link--expand">{{ seeActions }}</button>
                </li>
            </ul>
            <div class="{{ modalClass }} chapter-nav__list--hidden" tabindex="-1" role="dialog"
                     aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="{{ modalContainerClass }}">
                    <div class="{{ modalContentClass }} chapter-nav__list-wrap">
                        <div class="chapter-nav__title"> {{ title }} </div>
                        <ul class="chapter-nav__list">
                            <li class="chapter-nav__item">
                                <i class="it-link mr-2 align-middle"></i>
                                <button type="button" class="chapter-link">{{ copyLink }}</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>


<!--
  tooltip templates
-->

<script id="tooltip__main" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ item.body }}</p>
		</div>
	</div>
</script>

<script id="tooltip__glossary" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ trimmedSummary }}</p> {{ btnToGlossary }}
		</div>
	</div>
</script>

<script id="tooltip__note" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip doc-tooltip--note' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'> {{ item.body }}</p>
		</div>
	</div>
</script>


  <div id="main" role="document">
    <div class="container-fluid container-fluid--desktop main-container">
      <div class="row">
        <nav class="col--nav">
          <section class="docs-menu">
  <div id="desktop-menu" class="sidebar-nav">
    <a class=""
      aria-controls="desktop-menu" aria-label="exit navigation" title="exit navigation" href="#">
      <span class="" aria-hidden="true"></span>
    </a>

    <button data-toggle="collapse" data-target="#content-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop" type="button" aria-controls="content-index">
      content index
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="content-index" class="content-index--menu sidebar-list--wrapper sidebar-accordion-content collapse show">
      <ul class="">
        <li class="toctree-l1 ">
          <a href='index.html'>Summary</a>
        </li>
      </ul>
      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ssi-introduction.html">Self Sovereign Identity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ssi-introduction.html#introduction-to-ssi">Introduction to SSI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html">Normative Language and Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html#defined-terms">Defined Terms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="defined-terms.html#acronyms">Acronyms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">The Infrastructure of Trust</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust.html#federation-roles">Federation Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#trust-model-requirements">Trust Model Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#federation-api-endpoints">Federation API endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#configuration-of-the-federation">Configuration of the Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#entity-configuration">Entity Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configurations-common-parameters">Entity Configurations Common Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configuration-trust-anchor">Entity Configuration Trust Anchor</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configuration-leaves-and-intermediates">Entity Configuration Leaves and Intermediates</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#id1">Metadata Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#entity-statements">Entity Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-statement">Entity Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#trust-evaluation-mechanism">Trust Evaluation Mechanism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#relying-party-attestation">Relying Party Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#wallet-attestation">Wallet Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#trust-chain">Trust Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#offline-trust-attestation-mechanisms">Offline Trust Attestation Mechanisms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#non-repudiability-of-the-long-lived-attestations">Non-repudiability of the Long Lived Attestations</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#privacy-remarks">Privacy Remarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#considerations-about-decentralization">Considerations about Decentralization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wallet-solution.html">Wallet Solution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-instance">Wallet Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-instance-lifecycle">Wallet Instance Lifecycle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#initialization-process">Initialization Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#transition-to-valid-state">Transition to Valid state</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#return-to-operational-state">Return to Operational state</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#deactivation">Deactivation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-provider-endpoints">Wallet Provider Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#wallet-provider-metadata">Wallet Provider Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#payload">Payload</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#id1"><cite>wallet_provider</cite> metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#payload-federation-entity">Payload <cite>federation_entity</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#wallet-attestation">Wallet Attestation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wallet-attestation.html">Wallet Attestation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#high-level-design">High-level Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#static-component-view">Static Component View</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#dynamic-component-view">Dynamic Component View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#detailed-design">Detailed Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#wallet-attestation-request">Wallet Attestation Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#id1">Wallet Attestation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-data-model.html">PID/(Q)EAA Data Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-data-model.html#id1">SD-JWT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-q-eaa-sd-jwt-parameters">PID/(Q)EAA SD-JWT parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-claims">PID Claims</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-non-normative-examples">PID Non-Normative Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#q-eaa-non-normative-examples">(Q)EAA non-normative examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-data-model.html#mdoc-cbor">MDOC-CBOR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#namespaces">nameSpaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#mobile-security-object">Mobile Security Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#mdoc-cbor-examples">MDOC-CBOR Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-issuance.html">PID/(Q)EAA Issuance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#high-level-pid-flow">High-Level PID flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#high-level-q-eaa-flow">High-Level (Q)EAA flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#detailed-flow">Detailed Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-endpoint">Pushed Authorization Request Endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-par-request">Pushed Authorization Request (PAR) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-par-response">Pushed Authorization Request (PAR) Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#authorization-endpoint">Authorization endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#authorization-request">Authorization Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#authorization-response">Authorization Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#token-endpoint">Token endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#token-request">Token Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#token-response">Token Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#access-token">Access Token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#credential-endpoint">Credential endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#credential-request">Credential Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#credential-response">Credential Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#entity-configuration-credential-issuer">Entity Configuration Credential Issuer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Relying Party Solution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#remote-flow">Remote Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#request-uri-with-http-post">Request URI with HTTP POST</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-request-details">Authorization Request Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-device-flow-status-checks-and-security">Cross Device Flow Status Checks and Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request-object-details">Request Object Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request-uri-response">Request URI Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-response-details">Authorization Response Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirect-uri">Redirect URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirect-uri-errors">Redirect URI Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relying-party-entity-configuration">Relying Party Entity Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#proximity-flow">Proximity Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#device-engagement">Device Engagement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mdoc-request">mDoc Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mdoc-response">mDoc Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-termination">Session Termination</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="revocation-lists.html">Credential Lifecycle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#operational-requirements">Operational Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#functional-requirements">Functional Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#revocation-use-cases">Revocation Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#revocation-flows">Revocation Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#revocation-request-by-wallet-instance">Revocation Request by Wallet Instance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#status-attestation-flows">Status Attestation Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#status-attestation-request-by-wallet-instance">Status Attestation Request by Wallet Instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#status-attestation-presentation-to-the-verifiers">Status Attestation Presentation to the Verifiers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#credential-proof-of-possession">Credential Proof of Possession</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#status-attestation">Status Attestation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pseudonyms.html">pseudonyms.rst</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#attributes">Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#implementation-considerations">Implementation considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#libraries-and-code-snippets">Libraries and code snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="backup-restore.html">backup-restore.rst</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#attributes">Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#implementation-considerations">Implementation considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#libraries-and-code-snippets">Libraries and code snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Cryptographic algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="standards.html">Technical References</a></li>
</ul>

      
    </div>

    

    
    <button data-toggle="collapse" data-target="#table-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop collapsed" type="button" aria-controls="table-index">
      table index
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="table-index" class="table-index--menu collapse sidebar-list--wrapper sidebar-accordion-content collapse">
      <ul>
<li><a class="reference internal" href="pid-eaa-issuance.html#id42">Tab. 1 - PAR http request parameters</a></li>
<li><a class="reference internal" href="pid-eaa-issuance.html#id43">Tab. 2 - Credential http response parameters</a></li>
</ul>

    </div>
    

    
  </div>
</section>
          <!-- Toggle -->
<div class="navbar-toggler--wrap navbar-toggler--wrap--bottom p-3">
  <div class="navbar-toggler navbar-toggler--open p-0 border-0 ml-auto">
    <div class="navbar-toggler-bottom__chapter align-middle text-truncate">
      <span class="it-list mr-2"></span>Relying Party Solution
    </div>
  </div>
</div>

<div class="sidebar-tabs">

  <!-- Back button. -->
  <div class="row">
    <div class="col">
      <button class="navbar-toggler navbar-toggler--back border-0 ml-auto" type="button" data-toggle="offcanvas">
        <span class="it-arrow-left align-middle"></span>
        <span class="navbar-toggler__chapter align-middle ml-2">
          indices and glossary
        </span>
      </button>
    </div>
  </div>

  <!-- Tab -->
  <ul class="row ml-3 mr-3 nav nav-tabs" role="tablist">
    <li class="col text-center active">
      <a id="content-index-mobile-tab" data-toggle="tab" href="#content-index-mobile" aria-controls="content-index-mobile" role="tab" aria-selected="true" class="sidebar-btn p-2 sidebar-btn--mobile active show">
        contents
      </a>
    </li>
    <li class="col text-center">
      <a id="figures-index-mobile-tab" data-toggle="tab" href="#figures-index-mobile" aria-controls="figures-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        figures
      </a>
    </li>
    <li class="col text-center">
      <a id="table-index-mobile-tab" data-toggle="tab" href="#table-index-mobile" aria-controls="table-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        tables
      </a>
    </li>
    <li class="col text-center">
      <a id="glossary-index-mobile-tab" data-toggle="tab" href="#glossary-index-mobile" aria-controls="glossary-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        glossary
      </a>
    </li>
  </ul>
</div>


<!-- Off canvas -->
<section class="docs-offcanvas-menu" id="sidebar-nav">
  <div class="tab-content sidebar-nav">

      <div id="content-index-mobile" class="content-index--menu tab-pane sidebar-list--wrapper fade show active" role="tabpanel" aria-labelledby="content-index-mobile-tab">
        <ul class="">
          <li class="toctree-l1 ">
            <a href='index.html'>Summary</a>
          </li>
        </ul>
        
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ssi-introduction.html">Self Sovereign Identity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ssi-introduction.html#introduction-to-ssi">Introduction to SSI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html">Normative Language and Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html#defined-terms">Defined Terms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="defined-terms.html#acronyms">Acronyms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">The Infrastructure of Trust</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust.html#federation-roles">Federation Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#trust-model-requirements">Trust Model Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#federation-api-endpoints">Federation API endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#configuration-of-the-federation">Configuration of the Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#entity-configuration">Entity Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configurations-common-parameters">Entity Configurations Common Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configuration-trust-anchor">Entity Configuration Trust Anchor</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-configuration-leaves-and-intermediates">Entity Configuration Leaves and Intermediates</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#id1">Metadata Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#entity-statements">Entity Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#entity-statement">Entity Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#trust-evaluation-mechanism">Trust Evaluation Mechanism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trust.html#relying-party-attestation">Relying Party Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#wallet-attestation">Wallet Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#trust-chain">Trust Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="trust.html#offline-trust-attestation-mechanisms">Offline Trust Attestation Mechanisms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#non-repudiability-of-the-long-lived-attestations">Non-repudiability of the Long Lived Attestations</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#privacy-remarks">Privacy Remarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust.html#considerations-about-decentralization">Considerations about Decentralization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wallet-solution.html">Wallet Solution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-instance">Wallet Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-instance-lifecycle">Wallet Instance Lifecycle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#initialization-process">Initialization Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#transition-to-valid-state">Transition to Valid state</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#return-to-operational-state">Return to Operational state</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#deactivation">Deactivation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#wallet-provider-endpoints">Wallet Provider Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#wallet-provider-metadata">Wallet Provider Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#payload">Payload</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#id1"><cite>wallet_provider</cite> metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#payload-federation-entity">Payload <cite>federation_entity</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-solution.html#wallet-attestation">Wallet Attestation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-solution.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wallet-attestation.html">Wallet Attestation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#high-level-design">High-level Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#static-component-view">Static Component View</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#dynamic-component-view">Dynamic Component View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wallet-attestation.html#detailed-design">Detailed Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#wallet-attestation-request">Wallet Attestation Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet-attestation.html#id1">Wallet Attestation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-data-model.html">PID/(Q)EAA Data Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-data-model.html#id1">SD-JWT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-q-eaa-sd-jwt-parameters">PID/(Q)EAA SD-JWT parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-claims">PID Claims</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#pid-non-normative-examples">PID Non-Normative Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#q-eaa-non-normative-examples">(Q)EAA non-normative examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-data-model.html#mdoc-cbor">MDOC-CBOR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#namespaces">nameSpaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#mobile-security-object">Mobile Security Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-data-model.html#mdoc-cbor-examples">MDOC-CBOR Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-issuance.html">PID/(Q)EAA Issuance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#high-level-pid-flow">High-Level PID flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#high-level-q-eaa-flow">High-Level (Q)EAA flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#detailed-flow">Detailed Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-endpoint">Pushed Authorization Request Endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-par-request">Pushed Authorization Request (PAR) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#pushed-authorization-request-par-response">Pushed Authorization Request (PAR) Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#authorization-endpoint">Authorization endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#authorization-request">Authorization Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#authorization-response">Authorization Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#token-endpoint">Token endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#token-request">Token Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#token-response">Token Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#access-token">Access Token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pid-eaa-issuance.html#credential-endpoint">Credential endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#credential-request">Credential Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#credential-response">Credential Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-eaa-issuance.html#entity-configuration-credential-issuer">Entity Configuration Credential Issuer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Relying Party Solution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#remote-flow">Remote Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#request-uri-with-http-post">Request URI with HTTP POST</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-request-details">Authorization Request Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-device-flow-status-checks-and-security">Cross Device Flow Status Checks and Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request-object-details">Request Object Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request-uri-response">Request URI Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-response-details">Authorization Response Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirect-uri">Redirect URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirect-uri-errors">Redirect URI Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relying-party-entity-configuration">Relying Party Entity Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#proximity-flow">Proximity Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#device-engagement">Device Engagement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mdoc-request">mDoc Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mdoc-response">mDoc Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-termination">Session Termination</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="revocation-lists.html">Credential Lifecycle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#operational-requirements">Operational Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#functional-requirements">Functional Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#revocation-use-cases">Revocation Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#revocation-flows">Revocation Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#revocation-request-by-wallet-instance">Revocation Request by Wallet Instance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#status-attestation-flows">Status Attestation Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#status-attestation-request-by-wallet-instance">Status Attestation Request by Wallet Instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="revocation-lists.html#status-attestation-presentation-to-the-verifiers">Status Attestation Presentation to the Verifiers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#credential-proof-of-possession">Credential Proof of Possession</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation-lists.html#status-attestation">Status Attestation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pseudonyms.html">pseudonyms.rst</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#attributes">Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#implementation-considerations">Implementation considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#libraries-and-code-snippets">Libraries and code snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="pseudonyms.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="backup-restore.html">backup-restore.rst</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#general-properties">General Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#attributes">Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#implementation-considerations">Implementation considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#libraries-and-code-snippets">Libraries and code snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html#external-references">External references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Cryptographic algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="standards.html">Technical References</a></li>
</ul>

        
      </div>

      <div id="figures-index-mobile" class="figures-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="figures-index-mobile-tab">
        None
      </div>

      <div id="table-index-mobile" class="table-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="table-index-mobile-tab">
        <ul>
<li><a class="reference internal" href="pid-eaa-issuance.html#id42">Tab. 1 - PAR http request parameters</a></li>
<li><a class="reference internal" href="pid-eaa-issuance.html#id43">Tab. 2 - Credential http response parameters</a></li>
</ul>

      </div>

      <div id="glossary-index-mobile" class="glossary-mobile--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="glossary-index-mobile-tab">
        None
      </div>

  </div>
</section>
        </nav>
        <div id="doc-content" class="col-content">
          <!--<div class="doc-content__consultation">
            <span class="it-icon-edit"></span>
            in consultation
          </div>-->
          
            <div class="footer-buttons footer-buttons--prev" role="navigation" aria-label="footer navigation">
                <a href="pid-eaa-issuance.html" class="" title="PID/(Q)EAA Issuance" accesskey="p" rel="prev"> Torna a PID/(Q)EAA Issuance</a>
            </div>
          
          
  <section id="relying-party-solution">
<span id="id1"></span><h1>Relying Party Solution<a class="headerlink" href="#relying-party-solution" title="Permalink to this heading">¶</a></h1>
<p>This section describes how a remote Relying Party or a Verifier App requests to a Wallet Instance the presentation of the PID/EAAs.</p>
<p>In this section the following flows are described:</p>
<ul class="simple">
<li><p><a class="reference internal" href="remote-flow.html#remote-flow-sec"><span class="std std-ref">Remote Flow</span></a>, where the User presents a Credential to a remote Relying Party according to <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-presentations-1_0.html">OPENID4VP</a>. In this scenario the user-agent and the Wallet Instance may be used in the same device (<strong>Same Device Flow</strong>), or in different devices (<strong>Cross Device Flow</strong>).</p></li>
<li><p><a class="reference internal" href="#proximity-flow-sec"><span class="std std-ref">Proximity Flow</span></a>, where the User presents a Credential to a Verifier App according to ISO 18013-5. The User interacts with a Verifier using proximity connection technologies such as QR Code and Bluetooth Low Energy (BLE).</p></li>
</ul>
<section id="remote-flow">
<span id="remote-flow-sec"></span><h2>Remote Flow<a class="headerlink" href="#remote-flow" title="Permalink to this heading">¶</a></h2>
<p>In this flow the Relying Party MUST provide the URL where the signed presentation Request Object is available for download.</p>
<p>Depending on whether the User is using a mobile device or a workstation, the Relying Party MUST support the following remote flows:</p>
<ul class="simple">
<li><p><strong>Same Device</strong>, the Relying Party MUST provide a HTTP redirect (302) location to the Wallet Instance;</p></li>
<li><p><strong>Cross Device</strong>, the Relying Party MUST provide a QR Code which the User frames with the Wallet Instance.</p></li>
</ul>
<p>Once the Wallet Instance establishes the trust with the Relying Party and evaluates the request, the User gives the consent for the disclosure of the Digital Credentials, in the form of a Verifiable Presentation.</p>
<p>A High-Level description of the remote flow, from the User's perspective, is given below:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the Wallet Instance scans the QR Code and obtains the URL (Cross Device flow) or obtains directly an URL (Same Device flow);</p></li>
<li><p>the Wallet Instance extracts from the payload the following parameters: <code class="docutils literal notranslate"><span class="pre">client_id</span></code>, <code class="docutils literal notranslate"><span class="pre">request_uri</span></code>, <code class="docutils literal notranslate"><span class="pre">state</span></code>, <code class="docutils literal notranslate"><span class="pre">request_uri_methods</span></code> and <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code>;</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> is provided and set with the value <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>, the Wallet Instance MUST collect and validate the OpenID Federation Trust Chain related to the Relying Party. If the <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> is either not provided or is assigned a value different from <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>, the Wallet Instance MUST establish the trust by utilizing the <code class="docutils literal notranslate"><span class="pre">client_id</span></code> or an alternative <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> value. This alternative value MUST enable the Wallet Instance to establish trust with the Relying Party, ensuring compliance with the assurance levels mandated by the trust framework;</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">request_uri_methods</span></code> is provided and set with the value <code class="docutils literal notranslate"><span class="pre">post</span></code>, the Wallet Instance SHOULD transmit its metadata to the Relying Party's <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> endpoint using the HTTP POST method and obtain the signed Request Object. If <code class="docutils literal notranslate"><span class="pre">request_uri_methods</span></code> is set with the value <code class="docutils literal notranslate"><span class="pre">get</span></code> or not present, the Wallet Instance MUST fetch the signed Request Object using an HTTP request with method GET to the endpoint provided in the <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> parameter;</p></li>
<li><p>the Wallet Instance verifies the signature of the signed Request Object, using the public key obtained with the trust chain, and that its issuer matches the <code class="docutils literal notranslate"><span class="pre">client_id</span></code> obtained at the step number 2;</p></li>
<li><p>the Wallet Instance evaluates the requested Digital Credentials and checks the elegibility of the Relying Party in asking these by applying the policies related to that specific Relying Party, obtained with the trust chain;</p></li>
<li><p>the Wallet Instance asks User disclosure and consent;</p></li>
<li><p>the Wallet Instance presents the requested information to the Relying Party along with the Wallet Attestation. The Relying Party validates the presented Credentials checking the trust with their Issuers, and validates the Wallet Attestation by also checking that the Wallet Provider is trusted;</p></li>
<li><p>the Wallet Instance informs the User about the successfull authentication with the Relying Party, the User continues the navigation.</p></li>
</ol>
</div></blockquote>
<p>Below a sequence diagram that summarizes the interactions between all the involved parties.</p>
<p>The details of each step shown in the previous picture are described in the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Id</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>1</strong>, <strong>2</strong></p></td>
<td><p>The User requests to access to a protected resource of the Relying Party.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>3</strong>, <strong>4</strong>,</p></td>
<td><p>The Relying Party provides the Wallet Instance with a URL where the information about the Relying Party are provided, along with the information about where the signed request is available for download.</p></td>
</tr>
<tr class="row-even"><td><p><strong>5</strong>, <strong>6</strong>, <strong>7</strong>, <strong>8</strong>, <strong>9</strong></p></td>
<td><p>In the <strong>Cross Device Flow</strong>: the Request URI is provided in the form of a QR Code that is shown to the User. The User frames the QRCode with the Wallet Instance that extracts  <code class="docutils literal notranslate"><span class="pre">client_id</span></code>, <code class="docutils literal notranslate"><span class="pre">request_uri</span></code>, <code class="docutils literal notranslate"><span class="pre">state</span></code>, <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> and <code class="docutils literal notranslate"><span class="pre">request_uri_method</span></code>. In the <strong>Same Device Flow</strong> the Relying Party provides the same information of the Cross-Device flow but in the form of HTTP Redirect Location (302).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>10</strong>,</p></td>
<td><p>The Wallet Instance evaluates the trust with the Relying Party.</p></td>
</tr>
<tr class="row-even"><td><p><strong>11</strong>, <strong>12</strong></p></td>
<td><p>The Wallet Instance checks if the Relying Party has provided the <code class="docutils literal notranslate"><span class="pre">request_uri_method</span></code> within its signed Request Object. If provided and it is equal to <code class="docutils literal notranslate"><span class="pre">post</span></code>, the Wallet Instance provides its metadata to the Relying Party. The Relying Party returns a signed Request Object compliant to the Wallet technical capabilities.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>13</strong></p></td>
<td><p>When the Wallet Instance capabilities discovery is not supported by RP, the Wallet Instance request the signed Request Object using the HTTP method GET.</p></td>
</tr>
<tr class="row-even"><td><p><strong>14</strong></p></td>
<td><p>The Wallet Instance obtains the signed Request Object.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>15</strong>, <strong>16</strong>, <strong>17</strong></p></td>
<td><p>The Request Object JWS is verified by the Wallet Instance. The Wallet Instance processes the Relying Party metadata and applies the policies related to the Relying Party, attesting whose Digital Credentials and User data the Relying Party is granted to request.</p></td>
</tr>
<tr class="row-even"><td><p><strong>18</strong>, <strong>19</strong></p></td>
<td><p>The Wallet Instance requests the User's consent for the release of the Credentials. The User authorizes and consents the presentation of the Credentials by selecting/deselecting the personal data to release.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>20</strong></p></td>
<td><p>The Wallet Instance provides the Authorization Response to the Relying Party using an HTTP request with the method POST (response mode &quot;direct_post.jwt&quot;).</p></td>
</tr>
<tr class="row-even"><td><p><strong>21</strong>, <strong>22</strong>, <strong>23</strong>, <strong>24</strong>, <strong>25</strong></p></td>
<td><p>The Relying Party verifies the Authorization Response, extracts the Wallet Attestation to establish the trust with the Wallet Solution. The Relying Party extracts the Digital Credentials and attests the trust to the Credentials Issuer and the proof of possession of the Wallet Instance about the presented Digital Credentials. Finally, the Relying Party verifies the revocation status of the presented Digital Credentials.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>26</strong></p></td>
<td><p>The Relying Party provides to the Wallet Instance a redirect URI with a response code to be used by the Wallet Instance to finalize the authentication.</p></td>
</tr>
<tr class="row-even"><td><p><strong>27</strong>, <strong>28</strong> and <strong>29</strong></p></td>
<td><p>The User is informed by the Wallet Instance that the Autentication succeded, then the protected resource is made available to the User.</p></td>
</tr>
</tbody>
</table>
<section id="request-uri-with-http-post">
<h3>Request URI with HTTP POST<a class="headerlink" href="#request-uri-with-http-post" title="Permalink to this heading">¶</a></h3>
<p>The Relying Party SHOULD provide the POST method with its <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> endpoint
allowing the Wallet Instance to inform the Relying Party about its technical capabilities.</p>
<p>This feature can be useful when, for example, the Wallet Instance supports
a restricted set of features, supported algorithms or a specific url for
its <code class="docutils literal notranslate"><span class="pre">authorization_endpoint</span></code>, and any other information that it deems necessary to
provide to the Relying Party for better interoperability.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Wallet Instance, when providing its technical capabilities to the
Relying Party, MUST NOT include any User information or other explicit
information regarding the hardware used or usage preferences of its User.</p>
</div>
<p>If both the Relying Party and the Wallet Instance
support the <code class="docutils literal notranslate"><span class="pre">request_uri_method</span></code> with HTTP POST,
the Wallet Instance capabilities (metadata) MUST
be provided using an HTTP request to the <cite>request_uri</cite> endpoint of the Relying Party,
with the method POST and content type set to <cite>application/json</cite>.</p>
<p>A non-normative example of the HTTP request is represented below:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/request-uri</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">HOST</span><span class="o">:</span> <span class="l">relying-party.example.org</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;authorization_endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://wallet-solution.digital-strategy.europa.eu/authorization&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;response_types_supported&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;vp_token&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;response_modes_supported&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;form_post.jwt&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;vp_formats_supported&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;vc+sd-jwt&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;sd-jwt_alg_values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;ES256&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="s2">&quot;ES384&quot;</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;request_object_signing_alg_values_supported&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;ES256&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;presentation_definition_uri_supported&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The response of the Relying Party is defined in the section below.</p>
</section>
<section id="authorization-request-details">
<h3>Authorization Request Details<a class="headerlink" href="#authorization-request-details" title="Permalink to this heading">¶</a></h3>
<p>The Relying Party MUST create a Request Object in the form of a signed JWT and
MUST provide it to the Wallet Instance through an HTTP URL (request URI).
The HTTP URL points to the web resource where the signed Request Object is
available for download. The URL parameters contained in the Relying Party
response, containing the request URI, are described in the Table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>REQUIRED. Unique identifier of the Relying Party.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>request_uri</strong></p></td>
<td><p>REQUIRED. The HTTPs URL where the Relying Party provides the signed Request Object to the Wallet Instance.</p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id_scheme</strong></p></td>
<td><p>OPTIONAL. The scheme used by the Relying Party for the client_id, detailing the format and structure and the trust evaluation method. It SHOULD be set with <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>state</strong></p></td>
<td><p>OPTIONAL. A unique identifier for the current transaction generated by the Relying Party. The value SHOULD be opaque to the Wallet Instance.</p></td>
</tr>
<tr class="row-even"><td><p><strong>request_uri_method</strong></p></td>
<td><p>OPTIONAL. The HTTP method MUST be set with <code class="docutils literal notranslate"><span class="pre">get</span></code> or <code class="docutils literal notranslate"><span class="pre">post</span></code>. The Wallet Instance should use this method to obtain the signed Request Object from the request_uri. If not provided or equal to <code class="docutils literal notranslate"><span class="pre">get</span></code>, the Wallet Instance SHOULD use the HTTP method <code class="docutils literal notranslate"><span class="pre">get</span></code>. Otherwise, the Wallet Instance SHOULD provide its metadata within the HTTP POST body encoded in <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>Below a non-normative example of the response containing the required parameters previously described.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">https</span><span class="o">:</span><span class="c1">//wallet-solution.digital-strategy.europa.eu/authorization?client_id=...&amp;request_uri=...&amp;client_id_scheme=entity_id&amp;request_uri_method=post</span>
</pre></div>
</div>
<p>The value corresponding to the <cite>request_uri</cite> endpoint SHOULD be randomized, according to <a class="reference external" href="https://www.rfc-editor.org/rfc/rfc9101.html#section-5.2.1">RFC 9101, The OAuth 2.0 Authorization Framework: JWT-Secured Authorization Request (JAR)</a> Section 5.2.1.</p>
<p>In the <strong>Same Device Flow</strong> the Relying Party uses an HTTP response redirect (with status code set to 302) as represented in the following non-normative example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 /authorization Found
Location: https://wallet-solution.digital-strategy.europa.eu?
client_id=https%3A%2F%2Frelying-party.example.org%2Fcb
&amp;request_uri=https%3A%2F%2Frelying-party.example.org%2Frequest_uri
&amp;client_id_scheme=entity_id
&amp;request_uri_method=post
</pre></div>
</div>
<p>In the <strong>Cross Device Flow</strong>, a QR Code is shown by the Relying Party to the User in order to provide the Authorization Request. The User frames the QR Code using their Wallet Instance.</p>
<p>Below is represented a non-normative example of a QR Code issued by the Relying Party.</p>
<figure class="align-center" style="width: 50%">
<img alt="_images/verifier_qr_code.svg" src="_images/verifier_qr_code.svg" /></figure>
<p>Below is represented a non-normative example of the QR Code raw payload:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>https://wallet-solution.digital-strategy.europa.eu/authorization?client_id=https%3A%2F%2Frelying-party.example.org&amp;request_uri=https%3A%2F%2Frelying-party.example.org&amp;client_id_scheme=entity_id&amp;request_uri_method=post
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>error correction level</em> chosen for the QR Code MUST be Q (Quartily - up to 25%), since it offers a good balance between error correction capability and data density/space. This level of quality and error correction allows the QR Code to remain readable even if it is damaged or partially obscured.</p>
</div>
</section>
<section id="cross-device-flow-status-checks-and-security">
<h3>Cross Device Flow Status Checks and Security<a class="headerlink" href="#cross-device-flow-status-checks-and-security" title="Permalink to this heading">¶</a></h3>
<p>When the flow is Cross Device, the user-agent needs to check the session status to the endpoint made available by Relying Party (status endpoint). This check MAY be implemented in the form of JavaScript code, within the page that shows the QRCode, then the user-agent checks the status with a polling strategy in seconds or a push strategy (eg: web socket).</p>
<p>Since the QRcode page and the status endpoint are implemented by the Relying Party, it is under the Relying Party responsability the implementation details of this solution, since it is related to the Relying Party's internal API. However, the text below offers an implementation solution.</p>
<p>The Relying Party MUST bind the request of the user-agent, with a session cookie marked as <code class="docutils literal notranslate"><span class="pre">Secure</span></code> and <code class="docutils literal notranslate"><span class="pre">HttpOnly</span></code> , with the issued request. The request url SHOULD include a parameter with a random value. The HTTP response returned by this specialized endpoint MAY contain the HTTP status codes listed below:</p>
<ul class="simple">
<li><p><strong>201 Created</strong>. The signed Request Object was issued by the Relying Party that waits to be downloaded by the Wallet Instance at the <strong>request_uri</strong> endpoint.</p></li>
<li><p><strong>202 Accepted</strong>. This response is given when the signed Request Object was obtained by the Wallet Instance.</p></li>
<li><p><strong>200 OK</strong>. The Wallet Instance has provided the presentation to the Relying Party's  <strong>response_uri</strong> endpoint and the User authentication is successful. The Relying Party updates the session cookie allowing the user-agent to access to the protected resource. An URL is provided carrying the location where the user-agent is intended to navigate.</p></li>
<li><p><strong>401 Unauthorized</strong>. The Wallet Instance or its User have rejected the request, or the request is expired. The QRCode page SHOULD be updated with an error message.</p></li>
</ul>
<p>Below a non-normative example of the HTTP Request to this specialized endpoint, where the parameter <code class="docutils literal notranslate"><span class="pre">id</span></code> contains an opaque and random value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET /session-state?id=3be39b69-6ac1-41aa-921b-3e6c07ddcb03
HTTP/1.1
HOST: relying-party.example.org
</pre></div>
</div>
</section>
<section id="request-object-details">
<h3>Request Object Details<a class="headerlink" href="#request-object-details" title="Permalink to this heading">¶</a></h3>
<p>Below a non-normative example of HTTP request made by the Wallet Instance to the Relying Party.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">request_uri</span><span class="w"> </span><span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nx">HOST</span><span class="o">:</span><span class="w"> </span><span class="nx">relying</span><span class="o">-</span><span class="nx">party</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">org</span>
</pre></div>
</div>
</section>
<section id="request-uri-response">
<h3>Request URI Response<a class="headerlink" href="#request-uri-response" title="Permalink to this heading">¶</a></h3>
<p>The Relying Party issues the signed Request Object, where a non-normative example in the form of decoded header and payload is shown below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;ES256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;,
  &quot;kid&quot;: &quot;e0bbf2f1-8c3a-4eab-a8ac-2e8f34db8a47&quot;,
  &quot;trust_chain&quot;: [
    &quot;MIICajCCAdOgAwIBAgIC...awz&quot;,
    &quot;MIICajCCAdOgAwIBAgIC...2w3&quot;,
    &quot;MIICajCCAdOgAwIBAgIC...sf2&quot;
  ]
}
.
{
  &quot;scope&quot;: &quot;eu.europa.ec.eudiw.pid.it.1 WalletTrustEvidence&quot;,
  &quot;client_id_scheme&quot;: &quot;entity_id&quot;,
  &quot;client_id&quot;: &quot;https://relying-party.example.org&quot;,
  &quot;response_mode&quot;: &quot;direct_post.jwt&quot;,
  &quot;response_type&quot;: &quot;vp_token&quot;,
  &quot;response_uri&quot;: &quot;https://relying-party.example.org/response_uri&quot;,
  &quot;nonce&quot;: &quot;2c128e4d-fc91-4cd3-86b8-18bdea0988cb&quot;,
  &quot;state&quot;: &quot;3be39b69-6ac1-41aa-921b-3e6c07ddcb03&quot;,
  &quot;iss&quot;: &quot;https://relying-party.example.org&quot;,
  &quot;iat&quot;: 1672418465,
  &quot;exp&quot;: 1672422065,
  &quot;request_uri_method&quot;: &quot;post&quot;
}
</pre></div>
</div>
<p>The JWS header parameters are described below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Algorithm used to sign the JWT, according to [<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>]. It MUST be one of the supported algorithms in Section <em>Cryptographic Algorithms</em> and MUST NOT be set to <code class="docutils literal notranslate"><span class="pre">none</span></code> or to a symmetric algorithm (MAC) identifier.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>Media Type of the JWT, as defined in [<span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>Key ID of the public key needed to verify the JWS signature, as defined in [<span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>]. REQUIRED when <code class="docutils literal notranslate"><span class="pre">trust_chain</span></code> is used.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>trust_chain</strong></p></td>
<td><p>Sequence of Entity Statements that composes the Trust Chain related to the Relying Party, as defined in <a class="reference external" href="https://openid.net/specs/openid-connect-federation-1_0.html">OIDC-FED</a> Section <em>3.2.1. Trust Chain Header Parameter</em>.</p></td>
</tr>
</tbody>
</table>
<p>The JWS payload parameters are described herein:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>scope</strong></p></td>
<td><p>Aliases for well-defined Presentation Definitions IDs. It is used to identify which required Credentials and User attributes are requested by the Relying Party, according to the Section &quot;Using scope Parameter to Request Verifiable Credential(s)&quot; of [OID4VP].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>client_id_scheme</strong></p></td>
<td><p>String identifying the scheme of the value in the <code class="docutils literal notranslate"><span class="pre">client_id</span></code>. It MUST be set to the value <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>Unique Identifier of the Relying Party.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>response_mode</strong></p></td>
<td><p>It MUST be set to <code class="docutils literal notranslate"><span class="pre">direct_post.jwt</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>response_type</strong></p></td>
<td><p>It MUST be set to <code class="docutils literal notranslate"><span class="pre">vp_token</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>response_uri</strong></p></td>
<td><p>The Response URI to which the Wallet Instance MUST send the Authorization Response using an HTTP request using the method POST.</p></td>
</tr>
<tr class="row-even"><td><p><strong>nonce</strong></p></td>
<td><p>Fresh cryptographically random number with sufficient entropy, which length MUST be at least 32 digits.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>state</strong></p></td>
<td><p>Unique identifier of the Authorization Request.</p></td>
</tr>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>The entity that has issued the JWT. It will be populated with the Relying Party client id.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>Unix Timestamp, representing the time at which the JWT was issued.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>Unix Timestamp, representing the expiration time on or after which the JWT MUST NOT be valid anymore.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>request_uri_method</strong></p></td>
<td><p>String determining the HTTP method to be used with the <cite>request_uri</cite> endpoint to provide the Wallet Instance metadata to the Relying Party. The value is case-insensitive and can be set to: <cite>get</cite> or <cite>post</cite>. The GET method, as defined in [&#64;RFC9101], involves the Wallet Instance  sending a GET request to retrieve a Request Object. The POST method involves the Wallet Instance requesting the creation of a new Request Object by sending an HTTP POST request, with its metadata, to the request URI of the Relying Party.</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using the parameter <code class="docutils literal notranslate"><span class="pre">scope</span></code> requires that the Relying Party Metadata MUST contain the <code class="docutils literal notranslate"><span class="pre">presentation_definition</span></code>, where a non-normative example of it is given below:</p>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;presentation_definition&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presentation definitions&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;input_descriptors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eu.europa.ec.eudiw.pid.it.1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Person Identification Data&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;purpose&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User authentication&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vc+sd-jwt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;constraints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;$.credentialSubject.unique_id&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.credentialSubject.given_name&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.credentialSubject.family_name&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">          </span><span class="nt">&quot;limit_disclosure&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;preferred&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WalletTrustEvidence&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wallet Trust Evidence&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;purpose&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wallet Authentication&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jwt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;constraints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;$.iss&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.exp&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.iat&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.cnf.jwk&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;$.aal&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following parameters, even if defined in [OID4VP], are not mentioned in the previous non-normative example, since their usage is conditional and may change in future release of this documentation.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">presentation_definition</span></code>: JSON object according to <a class="reference external" href="https://identity.foundation/presentation-exchange/spec/v2.0.0/">Presentation Exchange</a>. This parameter MUST not be present when <code class="docutils literal notranslate"><span class="pre">presentation_definition_uri</span></code> or <code class="docutils literal notranslate"><span class="pre">scope</span></code> are present.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">presentation_definition_uri</span></code>: Not supported. String containing an HTTPS URL pointing to a resource where a Presentation Definition JSON object can be retrieved. This parameter MUST be present when <code class="docutils literal notranslate"><span class="pre">presentation_definition</span></code> parameter or a <code class="docutils literal notranslate"><span class="pre">scope</span></code> value representing a Presentation Definition is not present.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client_metadata</span></code>: A JSON object containing the Relying Party metadata values. The <code class="docutils literal notranslate"><span class="pre">client_metadata</span></code> parameter MUST NOT be present when <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> is <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>. Since the <code class="docutils literal notranslate"><span class="pre">client_metadata</span></code> is taken from <code class="docutils literal notranslate"><span class="pre">trust_chain</span></code>, this parameter is intended to not be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client_metadata_uri</span></code>: string containing an HTTPS URL pointing to a resource where a JSON object with the Relying Party metadata can be retrieved. The <code class="docutils literal notranslate"><span class="pre">client_metadata_uri</span></code> parameter MUST NOT be present when <code class="docutils literal notranslate"><span class="pre">client_id_scheme</span></code> is <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>. Since the <code class="docutils literal notranslate"><span class="pre">client_metadata</span></code> is taken from <code class="docutils literal notranslate"><span class="pre">trust_chain</span></code>, this parameter is intended to not be used.</p></li>
</ul>
</div>
<section id="request-uri-endpoint-errors">
<h4>Request URI Endpoint Errors<a class="headerlink" href="#request-uri-endpoint-errors" title="Permalink to this heading">¶</a></h4>
<p>When the Relying Party encounters errors while issuing the Request Object from the <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> endpoint, the following error responses are applicable:</p>
<ul class="simple">
<li><p><strong>invalid_request</strong>: The <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> URL is missing in some part within its webpath or urlparams, therefore it does not point to a valid Request Object and then it cannot be retrieved. This error is returned when the Request Object is not well referenced in the <code class="docutils literal notranslate"><span class="pre">request_uri</span></code>.</p></li>
<li><p><strong>server_error</strong>: The server encountered an unexpected condition that prevented it from fulfilling the request. This error is returned when the Relying Party's server is unable to process the Request Object due to a server-side issue, such as a malfunction or maintenance. The Wallet Instance should advise the User to try again later.</p></li>
</ul>
<p>The following is an example of an error response from <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> endpoint:</p>
<p>Another example:</p>
<p>There are cases where the Wallet Instance cannot validate the Request Object or the Request Object results invalid. This error occurs if the Request Object is successfully fetched from the <code class="docutils literal notranslate"><span class="pre">request_uri</span></code> but fails validation checks by the Wallet Instance. This could be due to incorrect signatures, malformed claims, or other validation failures, such as the revocation of its issuer (Relying Party).</p>
<p>Upon receiving an error response, the Wallet Instance SHOULD inform the User of the error condition in an appropriate manner. Additionally, the Wallet Instance SHOULD log the error and MAY attempt to recover from certain errors if feasible. For example, if the error is <code class="docutils literal notranslate"><span class="pre">server_error</span></code>, the Wallet Instance MAY prompt the User to re-enter or scan a new QR code, if applicable.</p>
<p>It is crucial for Wallet Instances to implement robust error handling to maintain a secure and user-friendly experience. Adhering to the specified error responses ensures interoperability and helps in diagnosing issues during the interaction with the Relying Party's endpoints.</p>
</section>
</section>
<section id="authorization-response-details">
<h3>Authorization Response Details<a class="headerlink" href="#authorization-response-details" title="Permalink to this heading">¶</a></h3>
<p>After getting the User authorization and consent for the presentation of the Credentials, the Wallet Instance sends the Authorization Response to the Relying Party <code class="docutils literal notranslate"><span class="pre">response_uri</span></code> endpoint, the content SHOULD be encrypted according <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-presentations-1_0.html">OPENID4VP</a> Section 6.3, using the Relying Party public key.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Why the response is encrypted?</strong></p>
<p>The response sent from the Wallet Instance to the Relying Party is encrypted to prevent a malicious agent from gaining access to the plaintext information transmitted within the Relying Party's network. This is only possible if the network environment of the Relying Party employs <a class="reference external" href="https://www.f5.com/glossary/ssl-termination">TLS termination</a>. Such technique employs a termination proxy that acts as an intermediary between the client and the webserver and handles all TLS-related operations. In this manner, the proxy deciphers the transmission's content and either forwards it in plaintext or by negotiates an internal TLS session with the actual webserver's intended target. In the first scenario, any malicious actor within the network segment could intercept the transmitted data and obtain sensitive information, such as an unencrypted response, by sniffing the transmitted data.</p>
</div>
<p>Below a non-normative example of the request:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/response_uri</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">HOST</span><span class="o">:</span> <span class="l">relying-party.example.org</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

response=eyJhbGciOiJFUzI1NiIs...9t2LQ
</pre></div>
</div>
<p>Below is a non-normative example of the decrypted JSON <code class="docutils literal notranslate"><span class="pre">response</span></code> content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
  &quot;state&quot;: &quot;3be39b69-6ac1-41aa-921b-3e6c07ddcb03&quot;,
  &quot;vp_token&quot;: [
      &quot;eyJhbGciOiJFUzI1NiIs...PT0iXX0&quot;,
      $WalletAttestation-JWT
  ],
  &quot;presentation_submission&quot;: {
      &quot;definition_id&quot;: &quot;32f54163-7166-48f1-93d8-ff217bdb0653&quot;,
      &quot;id&quot;: &quot;04a98be3-7fb0-4cf5-af9a-31579c8b0e7d&quot;,
      &quot;descriptor_map&quot;: [
          {
              &quot;id&quot;: &quot;eu.europa.ec.eudiw.pid.it.1&quot;,
              &quot;path&quot;: &quot;$.vp_token.verified_claims.claims._sd[0]&quot;,
              &quot;format&quot;: &quot;vc+sd-jwt&quot;
          },
          {
              &quot;id&quot;: &quot;WalletTrustEvidence&quot;,
              &quot;path&quot;: &quot;$&quot;,
              &quot;format&quot;: &quot;jwt&quot;
          }
      ]
  }
}
</pre></div>
</div>
<p>Where the following parameters are used:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>vp_token</strong></p></td>
<td><p>JSON Array containing the Verifiable Presentation(s). There MUST be at least two signed presentations in this Array:
- The requested Digital Credential (one or more, in format of SD-JWT VC or MDOC CBOR)
- The Wallet Instance Attestation</p></td>
</tr>
<tr class="row-odd"><td><p><strong>presentation_submission</strong></p></td>
<td><p>JSON Object containing the mappings between the requested Verifiable Credentials and where to find them within the returned Verifiable Presentation Token, according to the <a class="reference external" href="https://identity.foundation/presentation-exchange/spec/v2.0.0/">Presentation Exchange</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>state</strong></p></td>
<td><p>Unique identifier provided by the Relying Party within the Authorization Request.</p></td>
</tr>
</tbody>
</table>
<p>Below is a non-normative example of the <code class="docutils literal notranslate"><span class="pre">vp_token</span></code> decoded content, represented in the form of JWS header and payload, separated by a period:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;ES256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;,
  &quot;kid&quot;: &quot;e0bbf2f1-8c3a-4eab-a8ac-2e8f34db8a47&quot;
}
.
{
  &quot;iss&quot;: &quot;vbeXJksM45xphtANnCiG6mCyuU4jfGNzopGuKvogg9c&quot;,
  &quot;jti&quot;: &quot;3978344f-8596-4c3a-a978-8fcaba3903c5&quot;,
  &quot;aud&quot;: &quot;https://relying-party.example.org/response_uri&quot;,
  &quot;iat&quot;: 1541493724,
  &quot;exp&quot;: 1573029723,
  &quot;nonce&quot;: &quot;2c128e4d-fc91-4cd3-86b8-18bdea0988cb&quot;,
  &quot;vp&quot;: &quot;&lt;Issuer-Signed-JWT&gt;~&lt;Disclosure 1&gt;~&lt;Disclosure 2&gt;~...~&lt;Disclosure N&gt;&quot;
}
</pre></div>
</div>
<p>Where the following parameters are used:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>vp</strong></p></td>
<td><p>The Digital Credential in its original state. The public key contained in the Digital Credential MUST be used to verify the entire VP JWS as Proof of Possession of the private key which the public key is included in the Digital Credential. Eg: for SD-JWT VC the public key is provided within the <code class="docutils literal notranslate"><span class="pre">cnf.jwk</span></code> claim.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>JWS unique identifier.</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>Unix timestamp of the time of issuance of this presentation.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>Unix timestamp beyond which this presentation will no longer be considered valid.</p></td>
</tr>
<tr class="row-even"><td><p><strong>aud</strong></p></td>
<td><p>Audience of the VP, corresponding to the <code class="docutils literal notranslate"><span class="pre">response_uri</span></code> within the Authorization request issued by the Relying Party.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>nonce</strong></p></td>
<td><p>The nonce value provided by the Relying Party within the Authorization Request.</p></td>
</tr>
</tbody>
</table>
<section id="authorization-response-errors">
<h4>Authorization Response Errors<a class="headerlink" href="#authorization-response-errors" title="Permalink to this heading">¶</a></h4>
<p>When the Wallet sends a response using <code class="docutils literal notranslate"><span class="pre">direct_post.jwt</span></code> to the Relying Party, several errors may occur, including:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Invalid Credential</strong>: This error occurs when one or more Credentials or VPs, included in the <code class="docutils literal notranslate"><span class="pre">vp_token</span></code>, fail validation because they are malformed. The correct HTTP status code for this error is 400 (Bad Request). The error should be set to <code class="docutils literal notranslate"><span class="pre">invalid_request</span></code>, and the <code class="docutils literal notranslate"><span class="pre">error_description</span></code> SHOULD identify the malformed Credentials.</p></li>
<li><p><strong>Issuer Credential Trust Failure</strong>: This error arises when the Relying Party cannot establish trust with the issuer of a presented Credential, included in the <code class="docutils literal notranslate"><span class="pre">vp_token</span></code>. The appropriate HTTP status code for this error is 403 (Forbidden). The <code class="docutils literal notranslate"><span class="pre">error</span></code> should be labeled as <code class="docutils literal notranslate"><span class="pre">invalid_request</span></code>, and the <code class="docutils literal notranslate"><span class="pre">error_description</span></code> SHOULD specify the issuer for which trust could not be established.</p></li>
<li><p><strong>Invalid Nonce</strong>: This error happens when the nonce provided in the request is incorrect. The HTTP status code for this error should be 403 (Forbidden). The error SHOULD be labeled as <code class="docutils literal notranslate"><span class="pre">invalid_request</span></code>, with an <code class="docutils literal notranslate"><span class="pre">error_description</span></code> indicating that the nonce is incorrect.</p></li>
<li><p><strong>Invalid Wallet Attestation</strong>: This error occours when it's not possible to establish trust with the Wallet Attestation's issuer (Wallet Provider), or if the Wallet Attestation is invalid or does not meet the Relying Party's minimum security criteria. The correct HTTP status code for this error is 403 (Forbidden). The <code class="docutils literal notranslate"><span class="pre">error</span></code> SHOULD be marked as <code class="docutils literal notranslate"><span class="pre">invalid_request</span></code>, and the <code class="docutils literal notranslate"><span class="pre">error_description</span></code> should clarify that the issue stems from the Wallet Attestation's failure to establish trust with its issuer or its non-compliance with required security standards.</p></li>
<li><p><strong>Invalid Presentation Submission</strong>: This error occurs when the presentation submission is not valid. The appropriate HTTP status code for this error is 400 Bad Request. The <code class="docutils literal notranslate"><span class="pre">error</span></code> should be labeled as <code class="docutils literal notranslate"><span class="pre">invalid_request</span></code>, and the <code class="docutils literal notranslate"><span class="pre">error_description</span></code> should specify the invalid aspects of the presentation submission.</p></li>
</ul>
<p>To enhance clarity and ensure proper error handling, it's crucial to provide detailed error responses. Below are two examples of HTTP responses using <code class="docutils literal notranslate"><span class="pre">application/json</span></code> that include both the <code class="docutils literal notranslate"><span class="pre">error</span></code> and <code class="docutils literal notranslate"><span class="pre">error_description</span></code> members:</p>
</div></blockquote>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  &quot;error&quot;: &quot;invalid_request&quot;,
  &quot;error_description&quot;: &quot;Trust cannot be established with the issuer: https://issuer.example.com&quot;
}
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  &quot;error&quot;: &quot;invalid_request&quot;,
  &quot;error_description&quot;: &quot;The following Credentials/VP are malformed: [CredentialX, vp_token[2]]&quot;
}
</pre></div>
</div>
</section>
</section>
<section id="redirect-uri">
<h3>Redirect URI<a class="headerlink" href="#redirect-uri" title="Permalink to this heading">¶</a></h3>
<p>When the Relying Party provides the redirect URI, the Wallet Instance MUST send the user-agent to this redirect URI. The redirect URI allows the Relying Party to continue the interaction with the End-User on the device where the Wallet Instance resides after the Wallet Instance has sent the Authorization Response to the response URI.</p>
<p>The Relying Party MUST include a response code within the redirect URI. The response code is a fresh, cryptographically random number used to ensure only the receiver of the redirect can fetch and process the Authorization Response. The number could be added as a path component, as a parameter or as a fragment to the URL. It is RECOMMENDED to use a cryptographic random value of 128 bits or more at the time of the writing of this specification.</p>
<p>The following is a non-normative example of the response from the Relying Party to the Wallet Instance upon receiving the Authorization Response at the Response Endpoint.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json;charset=UTF-8</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;redirect_uri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://relying-party.example.org/cb#response_code=091535f699ea575c7937fa5f0f454aee&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">redirect_uri</span></code> value MUST be used with an HTTP method GET by either the Wallet Instance or the user-agent to redirect the User to the Relying Party in order to complete the process. The specific entity that performs this action depends on whether the flow is Same device or Cross device.</p>
</section>
<section id="redirect-uri-errors">
<h3>Redirect URI Errors<a class="headerlink" href="#redirect-uri-errors" title="Permalink to this heading">¶</a></h3>
<p>When the Wallet Instance sends the user-agent to the Redirect URI provided by the Relying Party, several errors may occur that prevent the successful completion of the process. These errors are critical as they directly impact the User experience by hindering the seamless flow of information between the Wallet Instance and the Relying Party. Below are potential errors related to the Redirect URI and their implications:</p>
<ul class="simple">
<li><p><strong>Mismatched Redirect URI</strong>: This error occurs when the Redirect URI provided by the Relying Party does not match any of the URIs linked with the User session. This mismatch can lead to a HTTP status error code set to 403 (Forbidden), indicating that the request cannot be processed due session/URI mismatch.</p></li>
<li><p><strong>Redirect URI Security Issues</strong>: If the Relying Party incurs in security issues when evaluating the User session with the provided URI, the Relying Party MUST raise an error. In such cases, an HTTP status code set to 403 (Forbidden) MUST be returned, indicating that the request is valid but the server is refusing action due to security precautions.</p></li>
</ul>
<p>Handling these errors requires clear communication to the User within the returned navigation web page. It is crucial for the Relying Party to implement robust error handling and validation mechanisms for Redirect URIs to ensure a secure implementation.</p>
</section>
<section id="relying-party-entity-configuration">
<h3>Relying Party Entity Configuration<a class="headerlink" href="#relying-party-entity-configuration" title="Permalink to this heading">¶</a></h3>
<p>According to the <a class="reference external" href="trust.html">Trust Model</a> section, the Relying Party is a Federation Entity and MUST expose a <em>well-known</em> endpoint containing its Entity Configuration.</p>
<p>Below a non-normative example of the request made by the Wallet Instance to the <em>openid-federation</em> well-known endpoint to obtain the Relying Party Entity Configuration:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/.well-known/openid-federation</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">HOST</span><span class="o">:</span> <span class="l">relying-party.example.org</span>
</pre></div>
</div>
<p>Below is a non-normative response example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;alg&quot;: &quot;ES256&quot;,
    &quot;kid&quot;: &quot;2HnoFS3YnC9tjiCaivhWLVUJ3AxwGGz_98uRFaqMEEs&quot;,
    &quot;typ&quot;: &quot;entity-statement+jwt&quot;
}
.
{
    &quot;exp&quot;: 1649590602,
    &quot;iat&quot;: 1649417862,
    &quot;iss&quot;: &quot;https://rp.example.it&quot;,
    &quot;sub&quot;: &quot;https://rp.example.it&quot;,
    &quot;jwks&quot;: {
        &quot;keys&quot;: [
            {
                &quot;kty&quot;: &quot;EC&quot;,
                &quot;crv&quot;: &quot;P-256&quot;,
                &quot;x&quot;: &quot;5s4qi ...&quot;,
                &quot;y&quot;: &quot;AQAB&quot;,
                &quot;kid&quot;: &quot;2HnoFS3YnC9tjiCaivhWLVUJ3AxwGGz_98uRFaqMEEs&quot;,
            }
        ]
    },
    &quot;metadata&quot;: {
        &quot;wallet_relying_party&quot;: {
            &quot;application_type&quot;: &quot;web&quot;,
            &quot;client_id&quot;: &quot;https://rp.example.it&quot;,
            &quot;client_name&quot;: &quot;Name of an example organization&quot;,
            &quot;jwks&quot;: {
                &quot;keys&quot;: [
                    {
                        &quot;kty&quot;: &quot;EC&quot;,
                        &quot;crv&quot;: &quot;P-256&quot;,
                        &quot;x&quot;: &quot;5s4qi ...&quot;,
                        &quot;y&quot;: &quot;AQAB&quot;,
                        &quot;kid&quot;: &quot;9tjiCaivhWLVUJ3AxwGGz_9&quot;,
                    }
                ]
            },

            &quot;contacts&quot;: [
                &quot;ops@relying-party.example.org&quot;
            ],

            &quot;request_uris&quot;: [
                &quot;https://relying-party.example.org/request_uri&quot;
            ],
            &quot;response_uris&quot;: [
                &quot;https://relying-party.example.org/response_uri&quot;
            ],
            &quot;default_acr_values&quot;: [
                &quot;https://www.spid.gov.it/SpidL2&quot;,
                &quot;https://www.spid.gov.it/SpidL3&quot;
            ],
            &quot;vp_formats&quot;: {
                &quot;vc+sd-jwt&quot;: {
                    &quot;sd-jwt_alg_values&quot;: [
                        &quot;ES256&quot;,
                        &quot;ES384&quot;
                    ],
                    &quot;kb-jwt_alg_values&quot;: [
                        &quot;ES256&quot;,
                        &quot;ES384&quot;
                    ]
                }
            },
              &quot;presentation_definitions&quot;: [
                  {
                    &quot;id&quot;: &quot;32f54163-7166-48f1-93d8-ff217bdb0653&quot;,
                    &quot;input_descriptors&quot;: [
                        {
                            &quot;id&quot;: &quot;IdentityCredential&quot;,
                            &quot;format&quot;: {
                                &quot;vc+sd-jwt&quot;: {}
                            },
                            &quot;constraints&quot;: {
                                &quot;limit_disclosure&quot;: &quot;required&quot;,
                                &quot;fields&quot;: [
                                    {
                                        &quot;path&quot;: [
                                            &quot;$.type&quot;
                                        ],
                                        &quot;filter&quot;: {
                                            &quot;type&quot;: &quot;string&quot;,
                                            &quot;const&quot;: &quot;IdentityCredential&quot;
                                        }
                                    },
                                    {
                                        &quot;path&quot;: [
                                            &quot;$.family_name&quot;
                                        ]
                                    },
                                    {
                                        &quot;path&quot;: [
                                            &quot;$.given_name&quot;
                                        ]
                                    },
                                    {
                                        &quot;path&quot;: [
                                            &quot;$.unique_id&quot;
                                        ],
                                        &quot;intent_to_retain&quot;: &quot;true&quot;
                                    }
                                ]
                            }
                        },
                    {
                        &quot;id&quot;: &quot;WalletTrustEvidence&quot;,
                        &quot;format&quot;: {
                            &quot;jwt&quot;: {}
                        },
                        &quot;constraints&quot;: {
                            &quot;fields&quot;: [
                                {
                                    &quot;path&quot;: [
                                        &quot;$.iss&quot;
                                    ],
                                    &quot;filter&quot;: {
                                        &quot;type&quot;: &quot;string&quot;,
                                        &quot;enum&quot;: [
                                            &quot;https://issuer.example.org&quot;,
                                            &quot;https://issuer2.example.org&quot;,
                                            &quot;https://issuer3.example.org&quot;
                                        ]
                                    }
                                },
                                {
                                    &quot;path&quot;: [
                                        &quot;$.iat&quot;
                                    ],
                                    &quot;filter&quot;: {
                                        &quot;type&quot;: &quot;number&quot;,
                                        &quot;minimum&quot;: 1504699136
                                    }
                                },
                                {
                                    &quot;path&quot;: [
                                        &quot;$.exp&quot;
                                    ],
                                    &quot;filter&quot;: {
                                        &quot;type&quot;: &quot;number&quot;,
                                        &quot;minimum&quot;: 1504700136
                                    }
                                },
                                {
                                    &quot;path&quot;: [
                                        &quot;$.cnf.jwk&quot;
                                    ],
                                    &quot;filter&quot;: {
                                        &quot;type&quot;: &quot;object&quot;
                                    }
                                }
                            ]
                        }
                    }
                    ]
                },
                  {
                    &quot;id&quot;: &quot;mDL-sample-req&quot;,
                    &quot;input_descriptors&quot;: [
                        {
                            &quot;id&quot;: &quot;mDL&quot;,
                            &quot;format&quot;: {
                                &quot;mso_mdoc&quot;: {
                                    &quot;alg&quot;: [
                                        &quot;EdDSA&quot;,
                                        &quot;ES256&quot;
                                    ]
                                },
                                &quot;constraints&quot;: {
                                    &quot;limit_disclosure&quot;: &quot;required&quot;,
                                    &quot;fields&quot;: [
                                        {
                                            &quot;path&quot;: [
                                                &quot;$.mdoc.doctype&quot;
                                            ],
                                            &quot;filter&quot;: {
                                                &quot;type&quot;: &quot;string&quot;,
                                                &quot;const&quot;: &quot;org.iso.18013.5.1.mDL&quot;
                                            }
                                        },
                                        {
                                            &quot;path&quot;: [
                                                &quot;$.mdoc.namespace&quot;
                                            ],
                                            &quot;filter&quot;: {
                                                &quot;type&quot;: &quot;string&quot;,
                                                &quot;const&quot;: &quot;org.iso.18013.5.1&quot;
                                            }
                                        },
                                        {
                                            &quot;path&quot;: [
                                                &quot;$.mdoc.family_name&quot;
                                            ],
                                            &quot;intent_to_retain&quot;: &quot;false&quot;
                                        },
                                        {
                                            &quot;path&quot;: [
                                                &quot;$.mdoc.portrait&quot;
                                            ],
                                            &quot;intent_to_retain&quot;: &quot;false&quot;
                                        },
                                        {
                                            &quot;path&quot;: [
                                                &quot;$.mdoc.driving_privileges&quot;
                                            ],
                                            &quot;intent_to_retain&quot;: &quot;false&quot;
                                        }
                                    ]
                                }
                            }
                        }
                    ]
                }
            ],

            &quot;default_max_age&quot;: 1111,

            // JARM related
            &quot;authorization_signed_response_alg&quot;: [[
                &quot;ES256&quot;
            ],
            &quot;authorization_encrypted_response_alg&quot;: [
                &quot;RSA-OAEP&quot;,
                &quot;RSA-OAEP-256&quot;
            ],
            &quot;authorization_encrypted_response_enc&quot;: [
                &quot;A128CBC-HS256&quot;,
                &quot;A192CBC-HS384&quot;,
                &quot;A256CBC-HS512&quot;,
                &quot;A128GCM&quot;,
                &quot;A192GCM&quot;,
                &quot;A256GCM&quot;
            ],

            // SIOPv2 related
            &quot;subject_type&quot;: &quot;pairwise&quot;,
            &quot;require_auth_time&quot;: true,
            &quot;id_token_signed_response_alg&quot;: [
                &quot;ES256&quot;
            ],
            &quot;id_token_encrypted_response_alg&quot;: [
                &quot;RSA-OAEP&quot;,
                &quot;RSA-OAEP-256&quot;
            ],
            &quot;id_token_encrypted_response_enc&quot;: [
                &quot;A128CBC-HS256&quot;,
                &quot;A192CBC-HS384&quot;,
                &quot;A256CBC-HS512&quot;,
                &quot;A128GCM&quot;,
                &quot;A192GCM&quot;,
                &quot;A256GCM&quot;
            ],
        },
        &quot;federation_entity&quot;: {
            &quot;organization_name&quot;: &quot;OpenID Wallet Relying Party example&quot;,
            &quot;homepage_uri&quot;: &quot;https://relying-party.example.org/home&quot;,
            &quot;policy_uri&quot;: &quot;https://relying-party.example.org/policy&quot;,
            &quot;logo_uri&quot;: &quot;https://relying-party.example.org/static/logo.svg&quot;,
            &quot;contacts&quot;: [
               &quot;tech@relying-party.example.org&quot;
             ]
        }
    },
    &quot;authority_hints&quot;: [
        &quot;https://registry.eudi-wallet.example.it&quot;
    ]
  }
}
</pre></div>
</div>
<p>The Entity Configuration is a JWS, where its header and payload parameters are defined below, based on the provided OpenID Federation Entity Configuration example:</p>
<p><strong>JWT Header Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>The digital signature algorithm used to sign the JWT. For example, &quot;ES256&quot; for ECDSA using P-256 and SHA-256.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>The Media Type of the JWT, it MUST be set to &quot;entity-statement+jwt&quot;.</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>The Key ID used for identifying the key used to sign the JWS.</p></td>
</tr>
</tbody>
</table>
<p><strong>JWT Payload Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>The issuer of the Entity Configuration, identifying the entity that issued the Entity Configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>The subject of the Entity Configuration, identifying the principal that is the subject of the Entity Configuration.</p></td>
</tr>
<tr class="row-even"><td><p><strong>jwks</strong></p></td>
<td><p>JSON Web Key Set representing the cryptographic keys used for trust evaluation operations and for signing this Entity Configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>metadata</strong></p></td>
<td><p>Metadata describing the entity, including information about the wallet relying party, client ID, client name, contacts, request URIs, response URIs, default ACR values, and VP formats.</p></td>
</tr>
<tr class="row-even"><td><p><strong>authority_hints</strong></p></td>
<td><p>URLs hinting at the authority or authorities that the entity trusts and which the public keys for verifieng this Entity Confgiuration are intended to be available within a Subordinate Statement.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>Unix Timestamp representing the expiration time of the Entity Configuration, after which the Entity Configuration MUST NOT be accepted for processing.</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>Unix Timestamp representing the issued at time of the Entity Configuration, representing the time at which the Entity Configuration was issued.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="proximity-flow">
<span id="proximity-flow-sec"></span><h2>Proximity Flow<a class="headerlink" href="#proximity-flow" title="Permalink to this heading">¶</a></h2>
<p>This section describes how a Verifier requests the presentation of an <em>mDoc-CBOR</em> Credential to a Wallet Instance according to the <em>ISO 18013-5 Specification</em>. Only <em>Supervised Device Retrieval flow</em> is supported in this technical implementation profile.</p>
<p>The presentation phase is divided into three sub-phases:</p>
<blockquote>
<div><p>1. <strong>Device Engagement</strong>: This subphase begins when the User is prompted to disclose certain attributes from the mDoc(s). The objective of this subphase is to establish a secure communication channel between the Wallet Instance and the Verifier App, so that the mDoc requests and responses can be exchanged during the communication subphase.
The messages exchanged in this subphase are transmitted through short-range technologies to limit the possibility of interception and eavesdropping.
This technical implementation profile exclusively supports QR code for Device Engagement.</p>
<p>2. <strong>Session establishment</strong>: During the session establishment phase, the Verifier App sets up a secure connection. All data transmitted over this connection is encrypted using a session key, which is known to both the Wallet Instance and the Verifier at this stage.
The established session MAY be terminated based on the conditions as detailed in [ISO18013-5#9.1.1.4].</p>
<p>3. <strong>Communication - Device Retrieval</strong>: The Verifier App encrypts the mDoc request with the appropriate session key and sends it to the Wallet Instance together with its public key in a session establishment message. The mDoc uses the data from the session establishment message to derive the session key and decrypt the mDoc request.
During the communication subphase, the Verifier App has the option to request information from the Wallet using mDoc requests and responses. The primary mode of communication is the secure channel established during the session setup. The Wallet Instance encrypts the mDoc response using the session key and transmits it to the Verifier App via a session data message. This technical implementation profile only supports Bluetooth Low Energy (BLE) for the communication sub-phase.</p>
</div></blockquote>
<p>The following figure illustrates the flow diagram compliant with ISO 18013-5 for proximity flow.</p>
<figure class="align-center" id="id3" style="width: 100%">
<span id="fig-high-level-flow-itwallet-presentation-iso"></span><a class="reference external image-reference" href="https://www.plantuml.com/plantuml/svg/bL9BZnCn3BxFhx3A0H3q3_ImMlOXXBJYqGguzE9ct2RQn0bvJDb_ZoSP3QFI2xab_Xx-xDocZ34NPpiisNDn1ufT1t9GPH_XUw88cA3KjuF_3QlnwNM2dHDYq9vf1Q-Up4ddErkeme9KZ381ESFg9rfB6JwnEB4IiAYTAuou7nN_Al-WQ8xcVzHd2dm8eKeFI-cMfApNDpVd3Nm9n90rmKLBa3s4I8b441dSWrTm7wcNkq7RD3xxJE07CIhlXmqyq624-CWdF94RYQaSWiP4iAweRzjr1vLvRkOVYIcYY32TWO8c9rSBp_GYWKoSe88LzPtsvx5HKO5xtnCSVVpNibA6ATjE8IyfKr7aBgptVDry0WlPXIBOH2aPpoEcbgzDOJTXIEPui2PfrqROZogki56OfNuvcxkdHv5N9H8eZSnaPLRJwUPU95JTn9P-5J60Tn2AcAZQjJ_MiCljxndUN6texN8Dr-ErSjd0roZrNEUjFDSVaJqaZP6gOMpDK0-61UHglkcJjJL75Cx4NHflAKT30xLGH_41wnLQIDb7FD6C7URSAOZCSfCjxyjSWcHEZBb4slCuTQL9FJVsWDRq9akuxfQuByx-0G00"><img alt="_images/High-Level-Flow-ITWallet-Presentation-ISO.svg" src="_images/High-Level-Flow-ITWallet-Presentation-ISO.svg" /></a>
<figcaption>
<p><span class="caption-number">Fig. 5 </span><span class="caption-text">High-Level Proximity Flow</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Step 1-3</strong>: The Verifier requests the User to reveal certain attributes from their mDoc(s) stored in the Wallet Instance. The User initiates the Wallet Instance. The Wallet Instance MUST create a new temporary key pair (EDeviceKey.Priv, EDeviceKey.Pub), and incorporate the cipher suite identifier, the identifier of the elliptic curve for key agreement, and the EDeviceKey public point into the device engagement structure (refer to [ISO18013-5#9.1.1.4]). This key pair is temporary and MUST be invalidated immediately after the secure channel is established. Finally, the Wallet Instance displays the QR Code for Device Engagement.</p>
<p>Below an example of a device engagement structure that utilizes QR for device engagement and Bluetooth Low Energy (BLE) for data retrieval.</p>
<p>CBOR data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a30063312e30018201d818584ba4010220012158205a88d182bce5f42efa59943f33359d2e8a968ff289d93e5fa444b624343167fe225820b16e8cf858ddc7690407ba61d4c338237a8cfcf3de6aa672fc60a557aa32fc670281830201a300f401f50b5045efef742b2c4837a9a3b0e1d05a6917</span>
</pre></div>
</div>
<p>In diagnostic notation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="o">%</span> <span class="n">Version</span>

  <span class="mi">1</span><span class="p">:</span>        <span class="o">%</span> <span class="n">Security</span>
  <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>     <span class="o">%</span> <span class="n">defines</span> <span class="n">the</span> <span class="n">cipher</span> <span class="n">suite</span> <span class="mi">1</span> <span class="n">which</span> <span class="n">contains</span> <span class="n">only</span> <span class="n">EC</span> <span class="n">curves</span>
      <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span>  <span class="o">%</span> <span class="n">embedded</span> <span class="n">CBOR</span> <span class="n">data</span> <span class="n">item</span>
        <span class="p">{</span>
          <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="o">%</span> <span class="n">kty</span><span class="p">:</span><span class="n">EC2</span> <span class="p">(</span><span class="n">Elliptic</span> <span class="n">curves</span> <span class="k">with</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">y</span> <span class="n">coordinate</span> <span class="n">pairs</span><span class="p">)</span>
        <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">%</span> <span class="n">crv</span><span class="p">:</span><span class="n">p256</span>
<span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="n">h</span><span class="s1">&#39;5A88D182BCE5F42EFA59943F33359D2E8A968FF289D93E5FA444B624343  167FE&#39;</span><span class="p">,</span><span class="o">%</span> <span class="n">x</span><span class="o">-</span><span class="n">coordinate</span>
<span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="n">h</span><span class="s1">&#39;B16E8CF858DDC7690407BA61D4C338237A8CFCF3DE6AA672FC60A557AA32FC67&#39;</span> <span class="o">%</span> <span class="n">y</span><span class="o">-</span><span class="n">coordinate</span>
        <span class="p">}</span>
      <span class="o">&gt;&gt;</span><span class="p">)</span>
    <span class="p">],</span>

    <span class="mi">2</span><span class="p">:</span> <span class="o">%</span><span class="n">DeviceRetrievalMethods</span><span class="p">(</span><span class="n">Device</span> <span class="n">engagement</span> <span class="n">using</span> <span class="n">QR</span> <span class="n">code</span><span class="p">)</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span> <span class="o">%</span><span class="n">BLE</span>
        <span class="mi">1</span><span class="p">,</span> <span class="o">%</span> <span class="n">Version</span>
      <span class="p">{</span>    <span class="o">%</span><span class="n">BLE</span> <span class="n">options</span>
          <span class="mi">0</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="o">%</span> <span class="n">no</span> <span class="n">support</span> <span class="k">for</span> <span class="n">mdoc</span> <span class="n">peripheral</span> <span class="n">server</span> <span class="n">mode</span>
          <span class="mi">1</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="o">%</span> <span class="n">support</span> <span class="n">mdoc</span> <span class="n">central</span> <span class="n">client</span> <span class="n">mode</span>
          <span class="mi">11</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;45EFEF742B2C4837A9A3B0E1D05A6917&#39;</span> <span class="o">%</span> <span class="n">UUID</span> <span class="n">of</span> <span class="n">mdoc</span> <span class="n">client</span> <span class="n">central</span> <span class="n">mode</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Step 4-6</strong>: The Verifier App scans the QR Code and generates its own ephemeral key pair (EReaderKey.Priv, EReaderKey.Pub). It then calculates the session key, using the public key received in the Engagement Structure and its newly-generated private key, as outlined in [ISO18013-5#9.1.1.5]. Finally, it generates its session key, which must be independently derived by both the Wallet Instance and the Verifier App.</p>
<p><strong>Step 7</strong>: The Verifier App creates an mDoc request that MUST be encrypted using the relevant session key, and transmits it to the Wallet Instance along with EReaderKey.Pub within a session establishment message. The mDoc request MUST be encoded in CBOR, as demonstrated in the following non-normative example.</p>
<p>CBOR data:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a26776657273696f6e63312e306b646f63526571756573747381a26c6974656d7352657175657374d818590152a267646f6354797065756f72672e69736f2e31383031332e352e312e6d444c6a6e616d65537061636573a2746f72672e69736f2e31383031332e352e312e4954a375766572696669636174696f6e2e65766964656e6365f4781c766572696669636174696f6e2e6173737572616e63655f6c6576656cf4781c766572696669636174696f6e2e74727573745f6672616d65776f726bf4716f72672e69736f2e31383031332e352e31ab76756e5f64697374696e6775697368696e675f7369676ef47264726976696e675f70726976696c65676573f46f646f63756d656e745f6e756d626572f46a69737375655f64617465f46f69737375696e675f636f756e747279f47169737375696e675f617574686f72697479f46a62697274685f64617465f46b6578706972795f64617465f46a676976656e5f6e616d65f468706f727472616974f46b66616d696c795f6e616d65f46a726561646572417574688443a10126a11821590129308201253081cda00302010202012a300a06082a8648ce3d0403023020311e301c06035504030c15536f6d652052656164657220417574686f72697479301e170d3233313132343130323832325a170d3238313132323130323832325a301a3118301606035504030c0f536f6d6520526561646572204b65793059301306072a8648ce3d020106082a8648ce3d03010703420004aa1092fb59e26ddd182cfdbc85f1aa8217a4f0fae6a6a5536b57c5ef7be2fb6d0dfd319839e6c24d087cd26499ec4f87c8c766200ba4c6218c74de50cd1243b1300a06082a8648ce3d0403020347003044022048466e92226e042add073b8cdc43df5a19401e1d95ab226e142947e435af9db30220043af7a8e7d31646a424e02ea0c853ec9c293791f930bf589bee557370a4c97bf6584058a0d421a7e53b7db0412a196fea50ca6d4c8a530a47dd84d88588ab145374bd0ab2a724cf2ed2facf32c7184591c5969efd53f5aba63194105440bc1904e1b9</span>
</pre></div>
</div>
<p>The above CBOR data is represented in diagnostic notation as follows:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;docRequests&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;itemsRequest&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
      <span class="s2">&quot;docType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.iso.18013.5.1.mDL&quot;</span><span class="p">,</span>
      <span class="s2">&quot;nameSpaces&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;org.iso.18013.5.1.IT&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;verification.evidence&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;verification.assurance_level&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;verification.trust_framework&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;org.iso.18013.5.1&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;un_distinguishing_sign&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;driving_privileges&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;document_number&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;issue_date&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;issuing_country&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;issuing_authority&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;birth_date&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;expiry_date&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;given_name&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;portrait&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;family_name&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
    <span class="s2">&quot;readerAuth&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="n">h</span><span class="s1">&#39;a10126&#39;</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="mi">33</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;308201253081cda00302010202012a300a06082a8648ce3d0403023020311e301c06035504030c15536f6d652052656164657220417574686f72697479301e170d3233313132343130323832325a170d3238313132323130323832325a301a3118301606035504030c0f536f6d6520526561646572204b65793059301306072a8648ce3d020106082a8648ce3d03010703420004aa1092fb59e26ddd182cfdbc85f1aa8217a4f0fae6a6a5536b57c5ef7be2fb6d0dfd319839e6c24d087cd26499ec4f87c8c766200ba4c6218c74de50cd1243b1300a06082a8648ce3d0403020347003044022048466e92226e042add073b8cdc43df5a19401e1d95ab226e142947e435af9db30220043af7a8e7d31646a424e02ea0c853ec9c293791f930bf589bee557370a4c97b&#39;</span>
      <span class="p">},</span>
      <span class="n">null</span><span class="p">,</span>
      <span class="n">h</span><span class="s1">&#39;58a0d421a7e53b7db0412a196fea50ca6d4c8a530a47dd84d88588ab145374bd0ab2a724cf2ed2facf32c7184591c5969efd53f5aba63194105440bc1904e1b9&#39;</span>
    <span class="p">]</span>
  <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Step 8</strong>: The Wallet Instance uses the session establishment message to derive the session keys and decrypt the mDoc request. It computes the session key using the public key received from the Verifier App and its private key.</p>
<p><strong>Step 9-10</strong>: When the Wallet Instance receives the mDoc request, it locates the documents that contain the requested attributes and asks the User for permission to provide this information to the Verifier. If the User agrees, the Wallet generates an mDoc response and transmits it to the Verifier App through the secure channel.</p>
<p><strong>Step 11-12</strong>: If the User gives consent, the Wallet Instance creates an mDoc response and transmits it to the Verifier App via the secure channel. The mDoc response MUST be encoded in CBOR, with its structure outlined in [ISO18013-5#8.3.2.1.2.2]. Below is a non-normative example of an mDoc response.</p>
<p>CBOR Data:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a36776657273696f6e63312e3069646f63756d656e747381a367646f6354797065756f72672e69736f2e31383031332e352e312e6d444c6c6973737565725369676e6564a26a6e616d65537061636573a2746f72672e69736f2e31383031332e352e312e495483d81858f7a46864696765737449440b6672616e646f6d506d44f21ee875f2c1d502b43198e5a15271656c656d656e744964656e74696669657275766572696669636174696f6e2e65766964656e63656c656c656d656e7456616c756581a2647479706571656c656374726f6e69635f7265636f7264667265636f7264bf6474797065781f68747470733a2f2f657564692e77616c6c65742e70646e642e676f762e697466736f75726365bf716f7267616e697a6174696f6e5f6e616d65754d6f746f72697a7a617a696f6e6520436976696c656f6f7267616e697a6174696f6e5f6964656d5f696e666c636f756e7472795f636f6465626974ffffd8185866a4686469676573744944046672616e646f6d50185d84dfb71ce9b173010ddd62174fbe71656c656d656e744964656e746966696572781c766572696669636174696f6e2e74727573745f6672616d65776f726b6c656c656d656e7456616c7565656569646173d8185865a4686469676573744944006672616e646f6d50137f903174253c4585358267aae2ea4e71656c656d656e744964656e746966696572781c766572696669636174696f6e2e6173737572616e63655f6c6576656c6c656c656d656e7456616c75656468696768716f72672e69736f2e31383031332e352e318bd8185852a46864696765737449440c6672616e646f6d5053e29d0ddbbc7d2306a32bdbe2e56e5171656c656d656e744964656e7469666965726b66616d696c795f6e616d656c656c656d656e7456616c756563446f65d8185855a4686469676573744944036672616e646f6d50990cba2069fa1b33b8d6ae910b6549dc71656c656d656e744964656e7469666965726a676976656e5f6e616d656c656c656d656e7456616c756567416e746f6e696fd818585ba46864696765737449440a6672616e646f6d504086c1379975f805f1b1f4975e6a126571656c656d656e744964656e7469666965726a69737375655f646174656c656c656d656e7456616c7565d903ec6a323031392d31302d3230d818585ca4686469676573744944016672616e646f6d50ab4ca30c918dd2fd0bf35242c15fa2d871656c656d656e744964656e7469666965726b6578706972795f646174656c656c656d656e7456616c7565d903ec6a323032342d31302d3230d8185855a4686469676573744944076672616e646f6d508d9066f6c8da16619867cd4e2fab0c8871656c656d656e744964656e7469666965726f69737375696e675f636f756e7472796c656c656d656e7456616c7565624954d818587ea4686469676573744944056672616e646f6d5059fe68db795dee4c20976380ea24770571656c656d656e744964656e7469666965727169737375696e675f617574686f726974796c656c656d656e7456616c75657828497374697475746f20506f6c696772616669636f2065205a656363612064656c6c6f20537461746fd818585ba4686469676573744944026672616e646f6d5008b3f1ca5517019767be3dee3bb0614571656c656d656e744964656e7469666965726a62697274685f646174656c656c656d656e7456616c7565d903ec6a313935362d30312d3230d818585ca4686469676573744944096672616e646f6d50a2395ec214350c26066306e23279b3ae71656c656d656e744964656e7469666965726f646f63756d656e745f6e756d6265726c656c656d656e7456616c756569393837363534333231d8185850a4686469676573744944066672616e646f6d50a25e1a5b915d2d6eafee9674e023293971656c656d656e744964656e74696669657268706f7274726169746c656c656d656e7456616c75654420212223d81858eea46864696765737449440d6672616e646f6d50eeed6a3b856563627589a360939d12f771656c656d656e744964656e7469666965727264726976696e675f70726976696c656765736c656c656d656e7456616c756582a37576656869636c655f63617465676f72795f636f646561416a69737375655f64617465d903ec6a323031382d30382d30396b6578706972795f64617465d903ec6a323032342d31302d3230a37576656869636c655f63617465676f72795f636f646561426a69737375655f64617465d903ec6a323031372d30322d32336b6578706972795f64617465d903ec6a323032342d31302d3230d818585ba4686469676573744944086672616e646f6d50c0ef486b2a194ed3cbf7f354fd40092171656c656d656e744964656e74696669657276756e5f64697374696e6775697368696e675f7369676e6c656c656d656e7456616c756561496a697373756572417574688443a10126a118215901423082013e3081e5a00302010202012a300a06082a8648ce3d040302301a3118301606035504030c0f5374617465204f662055746f706961301e170d3233313132343134353430345a170d3238313132323134353430345a30383136303406035504030c2d5374617465204f662055746f7069612049737375696e6720417574686f72697479205369676e696e67204b65793059301306072a8648ce3d020106082a8648ce3d03010703420004c338ec1000b351ce8bcdfc167450aeceb</span>
</pre></div>
</div>
<p>In diagnostic notation:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;documents&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;docType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.iso.18013.5.1.mDL&quot;</span><span class="p">,</span>
    <span class="s2">&quot;issuerSigned&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;nameSpaces&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;org.iso.18013.5.1.IT&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;6d44f21ee875f2c1d502b43198e5a152&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;verification.evidence&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;electronic_record&quot;</span><span class="p">,</span>
                <span class="s2">&quot;record&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;https://eudi.wallet.pdnd.gov.it&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;organization_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Motorizzazione Civile&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;organization_id&quot;</span><span class="p">:</span> <span class="s2">&quot;m_inf&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;country_code&quot;</span><span class="p">:</span> <span class="s2">&quot;it&quot;</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;185d84dfb71ce9b173010ddd62174fbe&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;verification.trust_framework&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;eidas&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;137f903174253c4585358267aae2ea4e&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;verification.assurance_level&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">)</span>
        <span class="p">],</span>
        <span class="s2">&quot;org.iso.18013.5.1&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;53e29d0ddbbc7d2306a32bdbe2e56e51&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;family_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Doe&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;990cba2069fa1b33b8d6ae910b6549dc&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;given_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Antonio&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;4086c1379975f805f1b1f4975e6a1265&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;issue_date&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2019-10-20&quot;</span><span class="p">)</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;ab4ca30c918dd2fd0bf35242c15fa2d8&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;expiry_date&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2024-10-20&quot;</span><span class="p">)</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;8d9066f6c8da16619867cd4e2fab0c88&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;issuing_country&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;IT&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;59fe68db795dee4c20976380ea247705&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;issuing_authority&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Istituto Poligrafico e Zecca dello Stato&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;08b3f1ca5517019767be3dee3bb06145&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;birth_date&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;1956-01-20&quot;</span><span class="p">)</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;a2395ec214350c26066306e23279b3ae&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;document_number&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;987654321&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;a25e1a5b915d2d6eafee9674e0232939&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;portrait&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;20212223&#39;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;eeed6a3b856563627589a360939d12f7&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;driving_privileges&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s2">&quot;vehicle_category_code&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span>
                <span class="s2">&quot;issue_date&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2018-08-09&quot;</span><span class="p">),</span>
                <span class="s2">&quot;expiry_date&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2024-10-20&quot;</span><span class="p">)</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;vehicle_category_code&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span>
                <span class="s2">&quot;issue_date&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2017-02-23&quot;</span><span class="p">),</span>
                <span class="s2">&quot;expiry_date&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">(</span><span class="s2">&quot;2024-10-20&quot;</span><span class="p">)</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
          <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
            <span class="s2">&quot;digestID&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="s2">&quot;random&quot;</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;c0ef486b2a194ed3cbf7f354fd400921&#39;</span><span class="p">,</span>
            <span class="s2">&quot;elementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;un_distinguishing_sign&quot;</span><span class="p">,</span>
            <span class="s2">&quot;elementValue&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span>
          <span class="p">}</span> <span class="o">&gt;&gt;</span><span class="p">)</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="s2">&quot;issuerAuth&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">h</span><span class="s1">&#39;a10126&#39;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="mi">33</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;3082013e3081e5a00302010202012a300a06082a8648ce3d040302301a3118301606035504030c0f5374617465204f662055746f706961301e170d3233313132343134353430345a170d3238313132323134353430345a30383136303406035504030c2d5374617465204f662055746f7069612049737375696e6720417574686f72697479205369676e696e67204b65793059301306072a8648ce3d020106082a8648ce3d03010703420004c338ec1000b351ce8bcdfc167450aeceb7d518bd9a519583e082d67effff06565804fc09abf0e4a08e699c9dba3796285a15f68e40ac7f9fc7700a15153a4065300a06082a8648ce3d040302034800304502210099b7d62e6bf7b1823db3713df889bf73e70bb4d9c58c21e92c58d2f1beffe932022058d039747a00d70e6d66be4797e6142b3608a014ee09b7b79af2cae2aaf27788&#39;</span>
        <span class="p">},</span>
        <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{</span>
      <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;digestAlgorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;SHA-256&quot;</span><span class="p">,</span>
      <span class="s2">&quot;docType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.iso.18013.5.1.mDL&quot;</span><span class="p">,</span>
      <span class="s2">&quot;valueDigests&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;org.iso.18013.5.1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;0E5F0B6B33418E508740771E82F893372EAF5B2445BC4C84DCF08B005E9493FC&#39;</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;DE21BB62FF2897D8B986D2CDA9F9BC5865C02807F7B4D9DD1FA4A79DF4C0D37F&#39;</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;BC5568239E35CE9FF8798C27FFDCD757B134B679F0FE05729AA3491381912E65&#39;</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;E6048BDC7FD6454296F1E3F54536107C9C5B24C4064DE46A98121E3630EECCA2&#39;</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;73690D92DCAA61B0203870F67C6AA9FDFEA889B6F0C720DE757B4B0A8516A206&#39;</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;E353EA0B0FD92B6BE90C64CC3B2EE1284153A8F0F5066B99AAC599200E6EEEB2&#39;</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;29227872CEB49923D267B5F4BADE6D387B42AC2DC4B2AE26C9013067FEE7018A&#39;</span><span class="p">,</span>
        <span class="mi">9</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;A6A119F7CACAC0B8C6AACAC747FD3FE7E50B6D9BB8A507FDA79F0DF6646F285D&#39;</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;6D8025D2F02A5E7E1406FB6AAEB67F9EDE9B07191A53F3E23B77C528223A94E2&#39;</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;B0D43E4E2EA534E4D5304E64BCF7A0F13E2C8EE8304B9CD23ABA4909652A4647&#39;</span><span class="p">,</span>
        <span class="mi">13</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;FBF4DE318982F2DBAD43C601CAEB22628B301AC18AA8264C5831B2AAAC89C486&#39;</span>
        <span class="p">},</span>
        <span class="s2">&quot;org.iso.18013.5.1.IT&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;CF57377B675F64F37314739592C1E8A911A7DDAF341CE2902FE877C5A835E4C1&#39;</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;4A4B4CC64EC9299C1A2501EA449F577005E9F7A60408057C07A7C67FB151E5F5&#39;</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;78824FBD6FBBA88A2AAB44DF8B6F5E9759126D87D1F4415995E658FD9239E1FE&#39;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;deviceKeyInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;deviceKey&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;AFD09E720B918CEDC2B8A881950BAB6A1051E18AE16A814D51E609938663D5E1&#39;</span><span class="p">,</span>
        <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="n">h</span><span class="s1">&#39;61FBC6C8AD24EC86A78BB4E9AC377DD2B7C711D9F2EB9AFD4AA0963662847AED&#39;</span><span class="p">}},</span>
        <span class="s2">&quot;validityInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;signed&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">(</span><span class="s2">&quot;2023-11-24T14:54:05Z&quot;</span><span class="p">),</span>
          <span class="s2">&quot;validFrom&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">(</span><span class="s2">&quot;2023-11-24T14:54:05Z&quot;</span><span class="p">),</span>
          <span class="s2">&quot;validUntil&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">(</span><span class="s2">&quot;2024-11-24T14:54:05Z&quot;</span><span class="p">)}</span>
        <span class="p">}</span>  <span class="o">&gt;&gt;</span><span class="p">),</span>
        <span class="n">h</span><span class="s1">&#39;f2461e4fab69e9f7bcffe552395424514524d1679440036213173101448d1b1ab4a293859b389ffa8b47aeed10e9b0c1545412ac37c51a76482cd9bbbe110152&#39;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;deviceSigned&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;nameSpaces&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">(</span><span class="o">&lt;&lt;</span> <span class="p">{}</span> <span class="o">&gt;&gt;</span><span class="p">),</span>
      <span class="s2">&quot;deviceAuth&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;deviceSignature&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="n">h</span><span class="s1">&#39;a10126&#39;</span><span class="p">,</span>
          <span class="p">{},</span>
          <span class="n">null</span><span class="p">,</span>
          <span class="n">h</span><span class="s1">&#39;1fed7190d2975ab79c072e6f1d9d52436059d1fc959d55baf74f057d89b10fcc0dc77a50d433d4c76ddf26223c5560c4ab123b5cb5eb805a90036aa147493076&#39;</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Step 13</strong>: The Verifier App is required to validate the signatures in the mDoc's issuerSigned field using the public key of the Credential Issuer specified within the mDoc. Subsequently, the Verifier MUST validate the signature in the deviceSigned field. If these signature checks pass, the Verifier can confidently consider the received information as valid.</p>
<section id="device-engagement">
<h3>Device Engagement<a class="headerlink" href="#device-engagement" title="Permalink to this heading">¶</a></h3>
<p>The Device Engagement structure MUST be have at least the following components:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Version</strong>: <em>tstr</em>. Version of the data structure being used.</p></li>
<li><p><strong>Security</strong>: an array that contains two mandatory values</p>
<ul>
<li><p>the cipher identifier: see Table 22 of [ISO18013-5]</p></li>
<li><p>the mDL public ephemeral key generated by the Wallet Instance and required by the Verifier App to derive the Session Key. The mDL public ephemeral key MUST be of a type allowed by the indicated cipher suite.</p></li>
</ul>
</li>
<li><p><strong>transferMethod</strong>: an array that contains one or more transferMethod arrays when performing device engagement using the QR code. This array is for offline data retrieval methods. A transferMethod array holds two mandatory values (type and version). Only the BLE option is supported by this technical implementation profile, then the type value MUST be set to <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p></li>
<li><p><strong>BleOptions</strong>: this elements MUST provide options for the BLE connection (support for Peripheral Server or Central Client Mode, and the device UUID).</p></li>
</ul>
</div></blockquote>
</section>
<section id="mdoc-request">
<h3>mDoc Request<a class="headerlink" href="#mdoc-request" title="Permalink to this heading">¶</a></h3>
<p>The messages in the mDoc Request MUST be encoded using CBOR. The resulting CBOR byte string for the mDoc Request MUST be encrypted with the Session Key obtained after the Device Engagement phase and MUST be transmitted using the BLE protocol.
The details on the structure of mDoc Request, including identifier and format of the data elements, are provided below.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>version</strong>: (tstr). Version of the data structure.</p></li>
<li><p><strong>docRequests</strong>: Requested DocType, NameSpace and data elements.</p>
<ul>
<li><p><strong>itemsRequest</strong>: #6.24(bstr .cbor ItemsRequest).</p>
<ul>
<li><p><strong>docType</strong>: (tstr). The DocType element contains the type of document requested. See <a class="reference internal" href="pid-eaa-data-model.html#pid-eaa-data-model-rst"><span class="std std-ref">Data Model Section</span></a>.</p></li>
<li><p><strong>nameSpaces</strong>: (tstr). See <a class="reference internal" href="pid-eaa-data-model.html#pid-eaa-data-model-rst"><span class="std std-ref">Data Model Section</span></a> for more details.</p>
<ul>
<li><p><strong>dataElements</strong>: (tstr). Requested data elements with <em>Intent to Retain</em> value for each requested element.</p>
<ul>
<li><p><strong>IntentToRetain</strong>: (bool). It indicates that the Verifier App intends to retain the received data element.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>readerAuth</strong>: <em>COSE_Sign1</em>. It is required for the Verifier App authentication.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The domestic data elements MUST not be returned unless specifically requested by the Verifier App.</p>
</div>
</section>
<section id="mdoc-response">
<h3>mDoc Response<a class="headerlink" href="#mdoc-response" title="Permalink to this heading">¶</a></h3>
<p>The messages in the mDoc Response MUST be encoded using CBOR and MUST be encrypted with the Session Key obtained after the Device Engagement phase.
The details on the structure of mDoc Response are provided below.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>version</strong>: (tstr). Version of the data structure.</p></li>
<li><p><strong>documents</strong>: Returned <em>DocType</em>, and <em>ResponseData</em>.</p>
<ul>
<li><p><strong>docType</strong>: (tstr). The DocType element contains the type of document returned. See <a class="reference internal" href="pid-eaa-data-model.html#pid-eaa-data-model-rst"><span class="std std-ref">Data Model Section</span></a>.</p></li>
<li><p><strong>ResponseData</strong>:</p>
<ul>
<li><p><strong>IssuerSigned</strong>: Responded data elements signed by the issuer.</p>
<ul>
<li><p><strong>nameSpaces</strong>: (tstr). See <a class="reference internal" href="pid-eaa-data-model.html#pid-eaa-data-model-rst"><span class="std std-ref">Data Model Section</span></a> for more details.</p>
<ul>
<li><p><strong>IssuerSignedItemBytes</strong>: #6.24(bstr .cbor).</p>
<ul>
<li><p><strong>digestID</strong>: (uint).  Reference value to one of the <strong>ValueDigests</strong> provided in the <em>Mobile Security Object</em> (<cite>issuerAuth</cite>).</p></li>
<li><p><strong>random</strong>: (bstr). Random byte value used as salt for the hash function. This value SHALL be different for each <em>IssuerSignedItem</em> and it SHALL have a minimum length of 16 bytes.</p></li>
<li><p><strong>elementIdentifier</strong>: (tstr). Identifier of User attribute name contained in the Credential.</p></li>
<li><p><strong>elementValue</strong>: (any). User attribute value</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>DeviceSigned</strong>: Responded data elements signed by the Wallet Instance.</p>
<ul>
<li><p><strong>NameSpaces</strong>: #6.24(bstr .cbor DeviceNameSpaces). The DeviceNameSpaces structure MAY be an empty structure. DeviceNameSpaces contains the data element identifiers and values. It is returned as part of the corresponding namespace in DeviceNameSpace.</p>
<ul>
<li><p><strong>DataItemName</strong>: (tstr). The identifier of the element.</p></li>
<li><p><strong>DataItemValue</strong>: (any). The value of the element.</p></li>
</ul>
</li>
<li><p><strong>DeviceAuth</strong>:  The DeviceAuth structure MUST contain the DeviceSignature elements.</p>
<ul>
<li><p><strong>DeviceSignature</strong>: It MUST contain the device signature for the Wallet Instance authentication.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>status</strong>: It contains a status code. For detailed description and action required refer to to Table 8 (ResponseStatus) of the [ISO18013-5]</p></li>
</ul>
</div></blockquote>
</section>
<section id="session-termination">
<h3>Session Termination<a class="headerlink" href="#session-termination" title="Permalink to this heading">¶</a></h3>
<p>The session MUST be terminated if at least one of the following conditions occur.</p>
<blockquote>
<div><ul class="simple">
<li><p>After a time-out of no activity of receiving or sending session establishment or session data messages occurs. The time-out for no activity implemented by the Wallet Instance and the Verifier App SHOULD be no less than 300 seconds.</p></li>
<li><p>When the Wallet Instance doesn't accept any more requests.</p></li>
<li><p>When the Verifier App does not send any further requests.</p></li>
</ul>
</div></blockquote>
<p>If the Wallet Instance and the Verifier App does not send or receive any further requests, the session termination MUST be initiated as follows.</p>
<blockquote>
<div><ul class="simple">
<li><p>Send the status code for session termination, or</p></li>
<li><p>dispatch the &quot;End&quot; command as outlined in [ISO18013-5#8.3.3.1.1.5].</p></li>
</ul>
</div></blockquote>
<p>When a session is terminated, the Wallet Instance and the Verifier App MUST perform at least the following actions:</p>
<blockquote>
<div><ul class="simple">
<li><p>destruction of session keys and related ephemeral key material;</p></li>
<li><p>closure of the communication channel used for data retrieval.</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


          
            <div class="footer-buttons footer-buttons--next" role="navigation" aria-label="footer navigation">
                  <a href="revocation-lists.html" class="" title="Credential Lifecycle" accesskey="n" rel="next">Credential Lifecycle</a>
              </div>
            
          </div>

        </div>
      </div>
  </div>
  <footer class="footer container-fluid container-fluid--desktop">
  <div class="px-3 pt-md-3 pb-md-2 mx-md-5 mb-4 mb-md-0">
    <div class="row align-items-center d-flex">
      <div class="col-xs-12 col-sm-6 col-lg-4 pt-4 pt-sm-5">
        <a href="http://teamdigitale.governo.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="team-logo--icon" src="_static/images/team-digitale-logo.svg" alt="Team per la Trasformazione Digitale">
            </div>
            <div class="px-2 border-white border-left team-logo--text text-white">
              Team per la Trasformazione Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-xs-12 col-sm-6 col-lg-4">
        <span class="d-block m-2 in-collaboration">in collaboration with</span>
        <a href="https://www.agid.gov.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="agid-logo--icon" src="_static/images/agid-logo.svg" alt="Agenzia per l'Italia Digitale">
            </div>
            <span class="agid-logo--separator border-white border-left"></span>
            <div class="px-2 agid-logo--text text-white">
              Agenzia per l'Italia Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-sm-12 col-lg-4 pt-4 pt-sm-5">
        <div class="text-center text-lg-right social d-flex align-items-center justify-content-center justify-content-lg-end flex-column flex-lg-row">
          <div class="mr-lg-1 mb-2 mb-lg-0">Follow us on</div>
          <div>
            <a href="https://github.com/italia/" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-github"></i></a>
            <a href="https://twitter.com/teamdigitaleIT" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-twitter"></i></a>
            <a href="https://www.linkedin.com/company/teamdigitale/" class="d-finline-lex small-prints mx-1 social__link"><i class="d-inline-block it-linkedin"></i></a>
          </div>
        </div>
      </div>
    </div>
    <!--/row-->

    <div class="row pb-4 colophon mt-md-5 mt-sm-3 pt-3 pt-sm-2">
      <ul class="col list-inline small">
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/privacy-policy/">Privacy policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/cookies-policy">Cookie policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/note-legali">Legal notes</a></strong>
        </li>
        
      </ul>
    </div>
  </div>
</footer>
  <script type="text/javascript">
var t = {
  this : "en",
  locale : "en_US",
  about_these_documents : "About these Documents",
  active_lang : "current language",
  cookiebar_accept : "Accept",
  cookiebar_msg : "We are using cookies to provide statistics that help us give you the best experience of our site. By continuing to use the site you are agreeing to our use of cookies.",
  cookiebar_privacy_policy : "Cookie policy",
  copyright : "Copyright",
  documents : "Documents",
  download : "Download",
  footer_link_privacy_policy : "Privacy policy",
  footer_link_cookies : "Cookie policy",
  footer_link_legal_notes : "Legal notes",
  go_to : "Go to",
  index : "Index",
  last_updated : "Last updated",
  most_viewed_this_month : "Most viewed this month",
  navigation_menu_label : "Navigation menu",
  navigation_menu_esc : "exit navigation",
  search : "Search",
  search_form_label : "Search in Document",
  search_form_off : "exit search form",
  search_form_on : "enter search form",
  search_form_start : "start searching",
  search_results : "Search Results",
  search_no_results : "Your search did not match any documents. Please make sure that all words are spelled correctly.",
  site_subtitle : "Public documents, made digital.",
  site_title : "Docs Italia",
  share_msg : "share",
  skiplinks_goto_content : "go to content",
  skiplinks_goto_navigation : "go to site navigation",
  toggle_menu_label : "go to navigation",
  version : "version",
  compare : "Compare",
  copy_link : "copy link",
  copied_link : "copied link",
  see_actions : "see actions",
  other_actions : "other actions",
  comments : "comments",
  back_to_text : "back to the text",
  glossary_empty : "information not found",
  glossary : "glossary",
  go_to_glossary : "vai al glossario",
  deepening : "deepening",
  example : "example",
  must : "must",
  must_not : "must not",
  should : "should",
  should_not : "should not",
  may : "may",
  use : "use",
  use_not : "don't use",
  consultation : "consultation",
  show_more : "show more",
  show_less : "show less",
  content_index : "content index",
  table_index : "table index",
  figures_index : "index of figures",
  figures : "figures",
  tables : "tables",
  contents : "contents",
  in_consultation : "in consultation",
  indices_and_glossary : "indices and glossary",
  note : "note",
  no_description : "no description",
  no_content : "no sections",
  no_glossary : "no glossary",
  no_figures : "no figures",
  no_tables : "no tables",
  summary : "summary",
  project : "Project",
  administration : "Administration",
  info : "About this document",
  related : "Related documents",
  actions : "Actions",
  tags : "Tags",
  view_source : "Source",
  previous : "previous",
  next : "next",
  in_collaboration_with : "in collaboration with",
  follow_us : "follow us on",
  header_link_trasformazione : "Piano Triennale",
  header_link_piattaforme : "Platforms",
  header_link_software : "Software",
  header_link_api : "API",
  header_link_community : "Communities",
  header_link_developers : "Developers",
  header_link_design : "Designers",
  header_link_tools : "Tools",
  header_link_forum : "Forum",
  header_link_docs : "Docs",
  header_link_github : "GitHub",
  header_link_projects : "Projects",
  header_link_documents : "Documents",
  header_link_administrations : "Administrations",
  header_link_whatis : "What is",
}
</script>
  <a href="#" aria-hidden="true" data-attribute="return-to-top" class="return-to-top">
  <i class="it-collapse"></i>
</a>
  
  <script type="text/javascript">
var PRODUCTION_DOMAIN = 'localhost';
var DOCSITALIA_DATA = {
  publisher_slug: 'organizzazione-demo',
  publisher_project_slug: 'progetto-demo'
}

LOCAL = true;
READTHEDOCS_DATA = {
  project: 'demo-document',
  version: 'bozza',
  language: 'it',
  api_host: '//' + PRODUCTION_DOMAIN
}

var DOCUMENTATION_OPTIONS = {
    URL_ROOT: './',
    VERSION: 'version: latest',
    LANGUAGE: 'en',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE: true,
    SOURCELINK_SUFFIX: '.txt'
};
</script>
<script src="_static/js/theme.js"></script>
<script type="text/javascript" src="_static/documentation_options.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
  
  <script type="text/javascript">
  <!-- Google analytics -->
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  $(document).ready(function() {
    var sendGaPageview = function() {
      ga('create', '', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
      
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendGaPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendGaPageview);
    }
  });
  <!-- End Google analytics -->
  <!-- Matomo -->
  /*
  var _paq = _paq || [];
  _paq.push(['setSiteId', '']);
  (function () {
    var u = '//italia.piwikpro.com/';
    _paq.push(['setTrackerUrl', u + 'piwik.php']);
    var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
    g.type = 'text/javascript'; g.async = true; g.defer = true; g.src = u + 'piwik.js'; s.parentNode.insertBefore(g, s);
  })();

  $(document).ready(function() {
    var sendMatomoPageview = function() {
      _paq.push(['setDocumentTitle', document.domain + '/' + document.title]);
      _paq.push(['enableLinkTracking']);
      _paq.push(['setDoNotTrack', 1]);
      _paq.push(['trackPageView']);
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendMatomoPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendMatomoPageview);
    }
  });*/
  <!-- End Matomo -->
</script>
  
    <div class="cookiebar bg-dark p-4 hide" aria-hidden="true">
  <div class="container">
    <div class="row d-flex align-items-center">
      <div class="col-12 col-md-7">
        <span class="text-white">We are using cookies to provide statistics that help us give you the best experience of our site. By continuing to use the site you are agreeing to our use of cookies.</span>
      </div>
      <div class="col-12 col-md-5 mt-2 mt-md-0 text-right">
        <a class="btn btn-link" href="/cookies-policy/">Cookie policy</a>
        <button class="btn btn-sm btn-primary mr-2" data-accept="cookiebar">Accept</button>
      </div>
    </div>
  </div>
</div>
  
  
  <div class="modal fade modal-sm-full" id="document-info" tabindex="-1" role="dialog" aria-labelledby="document-title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content rounded">
      <div class="modal-header">
        <h4 class="modal-title" id="document-title">Titolo del documento non impostato</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p></p>
        <p class="text-sans-serif">
          <i class="docs-icon-project font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Project:</span>
          <a href="/organizzazione-demo/progetto-demo" class="align-middle">
            Progetto demo
          </a>
        </p>
        <p class="text-sans-serif">
          <i class="docs-icon-publisher font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Administration:</span>
          <a href="/organizzazione-demo/" class="align-middle">
            Organizzazione demo
          </a>
        </p>
        <div class="d-flex text-sans-serif my-4">
          <div class="d-flex font-weight-bold align-items-center"><span class="mr-2">Tags:</span></div>
          <div class="d-flex flex-wrap">
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">demo</a></span>
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">docs italia</a></span>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="document-actions" aria-hidden="true">
  <div class="modal-dialog mt-5" role="document">
     <div class="modal-content rounded">
        <div class="modal-body p-1">
          <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Download</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Source</span>
    </a>
  </div>
</div>
        </div>
     </div>
  </div>
</div>

  
</body>
</html>